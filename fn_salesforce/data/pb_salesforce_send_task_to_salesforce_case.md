<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v51.0.0.1.486
-->

# Playbook - Salesforce: Send Task to Salesforce Case

### API Name
`salesforce_send_task_to_salesforce_case`

### Status
`enabled`

### Activation Type
`Manual`

### Activation Conditions
`incident.properties.salesforce_case_id has_a_value`

### Activation Form Elements
| Input Field Label | API Name | Element Type | Tooltip | Requirement |
| ----------------- | -------- | ------------ | ------- | ----------- |
| Priority | `task_priority` | select | - | Optional |
| Status | `task_status` | select | - | Optional |

### Object Type
`task`

### Description
Send the task to corresponding Salesforce case.


---
## Function - Salesforce: Create Task in Salesforce Case

### API Name
`salesforce_create_task_in_salesforce_case`

### Output Name
`create_task_results`

### Message Destination
`fn_salesforce`

### Function-Input Script
```python
import json

inputs.incident_id = incident.id
inputs.task_id = task.id
inputs.salesforce_case_id = incident.properties.salesforce_case_id
task_json = {}

task_json['WhatId'] = inputs.salesforce_case_id

description = "Task from IBM SOAR case {}".format(incident.id)
if task.instructions:
  description = description + ": {}".format(task.instructions.content)

task_json['Description'] = description

if task.due_date:
  task_json['ActivityDate'] = task.due_date
  
if task.name:
  task_json['Subject'] = task.name

if playbook.inputs.task_priority:
  task_json['Priority'] = playbook.inputs.task_priority
  
if playbook.inputs.task_status:
  task_json['Status'] = playbook.inputs.task_status
  
inputs.salesforce_task_payload = json.dumps(task_json)
```

---

## Local script - Salesforce: Write Create Task to Note

### Description
Write the results of creating a task in Salesforce to a note

### Script Type
`Local script`

### Object Type
`task`

### Script Content
```python
results = playbook.functions.results.create_task_results
content = results.get("content")
salesforce_task = content.get("salesforce_task")

if results.success:
  note_text = "<b>Salesforce: Create Task in Salesforce</b> created with TaskId: {}".format(salesforce_task.get("id", None))
else:
    note_text = "<b>Salesforce: Create Task in Salesforce</b> failed:<br>{}".format(salesforce_task.get("error", None))
  
incident.addNote(note_text)
```

---

