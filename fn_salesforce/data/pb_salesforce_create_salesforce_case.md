<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v49.1.51
-->

# Playbook - Salesforce: Create Salesforce Case

### API Name
`salesforce_create_salesforce_case`

### Status
`enabled`

### Activation Type
`manual`

### Object Type
`incident`

### Description
Create a case in Salesforce.


---
## Function - Salesforce: Create Case in Salesforce

### API Name
`salesforce_create_case_in_salesforce`

### Output Name
`create_salesforce_case_results`

### Message Destination
`fn_salesforce`

### Function-Input Script
```python
import json

case_json = {}
case_json['Origin'] = "Web"

if playbook.inputs.salesforce_case_status:
  case_json['Status'] = playbook.inputs.salesforce_case_status
else: 
  case_json['Status'] = "New"
  
if playbook.inputs.salesforce_case_description:
  case_json['Description'] = playbook.inputs.salesforce_case_description

if playbook.inputs.salesforce_case_subject:
  case_json['Subject'] = playbook.inputs.salesforce_case_subject

if playbook.inputs.salesforce_case_internal_comments:
  case_json['Comments'] = playbook.inputs.salesforce_case_internal_comments

if incident.properties.salesforce_account_id:
  case_json['AccountId'] = incident.properties.salesforce_account_id

if incident.properties.salesforce_owner_id:
  case_json['OwnerId'] = incident.properties.salesforce_owner_id
  
if incident.properties.salesforce_contact_id:
  case_json['ContactId'] = incident.properties.salesforce_contact_id
  
inputs.salesforce_case_payload = json.dumps(case_json)

```

---

## Local script - Salesforce: Write results of Create Salesforce Case function

### Description
Write results of Create Salesforce Create Case function to a note

### Script Type
`Local script`

### Objet Type
`incident`

### Script Content
```python
results = playbook.functions.results.create_salesforce_case_results
content = results.get("content")
salesforce_case = content.get("salesforce_case")

if results.success:
  note_text = "<b>Salesforce: Create Case in Salesforce</b> created Case with CaseId: {}".format(salesforce_case.get("id", None))
  if salesforce_case.get("entity_url", None):
    note_text = note_text + "   <a target='_blank' href='{0}'>Link</a>".format(salesforce_case.get("entity_url"))
else:
  note_text = "<b>Salesforce: Create Case in Saleforce</b> failed:<br>{}".format(salesforce_case.get("error", None))
  
incident.addNote(note_text)
```

---
