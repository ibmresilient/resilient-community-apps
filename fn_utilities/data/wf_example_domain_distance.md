<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
-->

# Example: Domain Distance

## Function - Utilities: Domain Distance

### API Name
`utilities_domain_distance`

### Output Name
`None`

### Message Destination
`fn_utilities`

### Pre-Processing Script
```python
# if email address, return only domain portion
if "email" in artifact.type.lower():
  split_email = artifact.value.split("@")
  if len(split_email) > 1:
    inputs.domain_name = split_email[1]
  else:
    inputs.domain_name = artifact.value
else:
  # The domain name being tested
  inputs.domain_name = artifact.value

# The list of domains to test against
inputs.domain_list = "ibm.com, resilientsystems.com, ibmcloud.com, bluemix.com"
```

### Post-Processing Script
```python
# The result includes:
#   "domain_name" - the name being tested
#   "distances" - a dicctionary of all the distances
#   "closest" - the closest match from the list.
# If the match distance is only 1 or 0, the domain name is very easily confused with one on the list!

if results.closest.distance <= 1:
  html = u"<div>Warning!  Domain {} is easily confused with {}!</div>".format(results.domain_name, results.closest.name)
  incident.addNote(helper.createRichText(html))

```

---

