<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
-->

# Example: Shell Command

## Function - Utilities: Shell Command

### API Name
`utilities_shell_command`

### Output Name
`None`

### Message Destination
`fn_utilities`

### Pre-Processing Script
```python
import re
# You can set the command on the "Input" panel or dynamically
# NOTE: The administrator must configure each command before you can run it!
#inputs.shell_command = "traceroute"
# True if running a Remote Powershell, otherwise False
#inputs.shell_remote = False

if artifact.type.lower() in ['url']:
  p = re.compile("^(?:http[s]*?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n?]+)")
  match = p.match(artifact.value)
  inputs.shell_param1 = match.group(1) if match else artifact.value
else:
  # Parameters to the command.  In this case we run traceroute to the artifact
  inputs.shell_param1 = artifact.value

```

### Post-Processing Script
```python
# Outputs are:
#  - "commandline": the command that ran
#  - "start": timestamp, epoch milliseconds
#  - "end": timestamp, epoch milliseconds
#  - "elapsed": milliseconds
#  - "exitcode": nonzero indicates that the command failed
#  - "stdout": text output from the command
#  - "stderr": error text output from the command
#  - "stdout_json": object parsed from JSON output from the command
#  - "stderr_json": object parsed from JSON error output from the command

if results.exitcode == 0:
  note_text = u"Command succeeded: {}\nStandard Out: {}\nStandard Error: {}".format(results.commandline, results.stdout, results.stderr)
else:
  note_text = u"Command failed: {}\nStandard Out: {}\nStandard Error: {}".format(results.commandline, results.stdout, results.stderr)

incident.addNote(helper.createPlainText(note_text))

```

---

