<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
-->

# Playbook Maker

## Function - Make Playbook

### API Name
`make_playbook`

### Output Name
`None`

### Message Destination
`fn_playbook_maker`

### Pre-Processing Script
```python
inputs.pbm_playbook_type = rule.properties.pbm_type
inputs.pbm_playbook_name = rule.properties.pbm_name_prefix
inputs.pbm_app_name = rule.properties.pbm_app_name
inputs.pbm_function_names = rule.properties.pbm_function_names
inputs.pbm_script_names = rule.properties.pbm_script_names
inputs.pbm_activation_type = rule.properties.pbm_activation_type
inputs.pbm_activation_fields = rule.properties.pbm_activation_fields if rule.properties.pbm_activation_fields else False
inputs.pbm_add_to_same_playbook = rule.properties.pbm_add_to_same_playbook if rule.properties.pbm_add_to_same_playbook else False

```

### Post-Processing Script
```python
if not results.success:
  incident.addNote("Playbook Maker failed: {} for playbook name prefix: {}".format(results.reason, rule.properties.pbm_name_prefix))
else:
  msg_list = []
  for pbk in results.content:
    msg = "{}: {}".format(pbk.get('playbook_name'), "Success" if pbk.get('success', False) else "Failure")
    if pbk.get('success', False):
      msg = "{} <a target='blank' href='#playbooks/designer/{}'>Playbook link</a>".format(msg, pbk.get('id'))
    else:
      msg = "Creating playbook failed: {}".format(pbk.get('playbook_name'))
    msg_list.append(msg)
      
  incident.addNote(helper.createRichText("Playbook Maker results:<br>{}".format("<br>".join(msg_list))))
```

---

