<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v50.0.151
-->

# Playbook - PagerDuty: Resolve PagerDuty Incident (PB)

### API Name
`pagerduty_resolve_pagerduty_incident_pb`

### Status
`enabled`

### Activation Type
`Automatic`

### Activation Conditions
`incident.properties.pd_incident_id has_a_value AND (incident.resolution_id changed_to Resolved OR incident.resolution_id changed_to Duplicate OR incident.resolution_id changed_to Unresolved OR incident.resolution_id changed_to Not an Issue)`

### Object Type
`incident`

### Description
Transition a PagerDuty Incident to either acknowledged or resolved. The rule for this workflow should only trigger if a PagerDuty Incident has already been created.


---
## Function - PagerDuty Transition Incident

### API Name
`pagerduty_transition_incident`

### Output Name
`transition_output`

### Message Destination
`pagerduty`

### Function-Input Script
```python
inputs.pd_incident_id = incident.properties.pd_incident_id
if incident.resolution_id:
  inputs.pd_status = 'resolved'
  inputs.pd_description = incident.resolution_summary.content
#else:
#  inputs.pd_status = 'acknowledged'
  
priority = { 'Low': 'p3', 'Medium': 'p2', 'High': 'p1' }
if incident.severity_code in priority:
  inputs.pd_priority = priority.get(incident.severity_code)
```

---

## Local script - Transition Post-Script

### Description


### Script Type
`Local script`

### Object Type
`incident`

### Script Content
```python
incident.addNote("PagerDuty incident Resolved")
```

---

