<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v50.1.197
-->

# Playbook - PagerDuty: Update PagerDuty Incident Severity (PB)

### API Name
`pagerduty_update_pagerduty_incident_pb`

### Status
`enabled`

### Activation Type
`Automatic`

### Activation Conditions
`incident.properties.pd_incident_id has_a_value AND incident.severity_code changed`

### Object Type
`incident`

### Description
Update PagerDuty Incident severity. This playbook should only trigger if a PagerDuty Incident has already been created.


---
## Function - PagerDuty Transition Incident

### API Name
`pagerduty_transition_incident`

### Output Name
`transition_output`

### Message Destination
`pagerduty`

### Function-Input Script
```python
inputs.pd_incident_id = incident.properties.pd_incident_id
if incident.resolution_id:
  inputs.pd_status = 'resolved'
  inputs.pd_description = incident.resolution_summary.content
#else:
#  inputs.pd_status = 'acknowledged'
  
priority = { 'Low': 'p3', 'Medium': 'p2', 'High': 'p1' }
if incident.severity_code in priority:
  inputs.pd_priority = priority.get(incident.severity_code)
```

---

## Local script - Severity Post-Script

### Description


### Script Type
`Local script`

### Object Type
`incident`

### Script Content
```python
priority = { 'Low': 'P3', 'Medium': 'P2', 'High': 'P1' }

pd_incident_severity = priority[incident.severity_code]

incident.addNote("Incident Priority Update to {}" .format(pd_incident_severity))
```

---

