<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="search" title="Search" href="../search.html" />

    <link rel="shortcut icon" href="../_static/IBM_Security_Shield.ico"/><!-- Generated with Sphinx 7.3.7 and Furo 2024.05.06 -->
        <title>Technical Workshop Guide: resilient-circuits - QRadar SOAR Apps</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=387cc868" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=afe95b24" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" /
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">QRadar SOAR Apps</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/IBM_Security_Light.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/IBM_Security_Dark.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">QRadar SOAR Apps</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Recently Updated Apps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pb_sans_isc_scan_ip/README.html">ISC SANS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_rapid7_insight_idr/README.html">Rapid7 InsightIDR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_pa_panorama/README.html">Palo Alto Panorama</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_mcafee_epo/README.html">McAfee ePO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_data_feed_plugin_odbcfeed/README.html">Data Feeder for ODBC Databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_relations/README.html">Parent/Child Relationships</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_rest_api/README.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_salesforce/README.html">Salesforce</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">App Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../docs/python_api.html">IBM SOAR Python Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">All Apps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../fn_abuseipdb/README.html">AbuseIPDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_alienvault_otx/README.html">AlienVault OTX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_anomali_staxx/README.html">Anomali Staxx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_ansible/README.html">Ansible for SOAR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_ansible_tower/README.html">Ansible Tower</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_api_void/README.html">APIVoid Threat Analysis APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_aws_guardduty/README.html">Amazon AWS GuardDuty</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_aws_iam/README.html">AWS IAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_aws_utilities/README.html">AWS Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_axonius/README.html">Axonius</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_azure_automation_utilities/README.html">Azure Automation Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_bigfix/README.html">BigFix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_bmc_helix/README.html">BMC Helix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_calendar_invite/README.html">Calendar Invite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_cisco_amp4ep/README.html">Cisco Secure Endpoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_cisco_asa/README.html">Cisco ASA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_cisco_enforcement/README.html">Cisco Umbrella Enforcement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_cisco_umbrella_inv/README.html">Cisco Umbrella Investigate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_clamav/README.html">ClamAV</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_cloud_foundry/README.html">Cloud Foundry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_components/README.html">App Host Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_create_webex_meeting/README.html">Cisco WebEx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_create_zoom_meeting/README.html">Zoom</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_cve_search/README.html">CVE Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_darktrace/README.html">Darktrace <!-- omit in toc --></a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_datatable_utils/README.html">Datatable Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_elasticsearch/README.html">ElasticSearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_email_header_validation/README.html">Email Header Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_exchange/README.html">Microsoft Exchange</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_exchange_online/README.html">Microsoft Exchange Online</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_extrahop/README.html">ExtraHop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_geocoding/README.html">Google Geocoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_github/README.html">GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_google_cloud_dlp/README.html">Google Cloud DLP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_google_cloud_scc/README.html">Google Cloud Security Command Center</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_googlesafebrowsing/README.html">Google Safe Browsing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_greynoise/README.html">GreyNoise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_grpc_interface/README.html">gRPC Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_hibp/README.html">Have I Been Pwned</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_html2pdf/README.html">HTML to PDF</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_icdx/README.html">Symantec ICDx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_incident_utils/README.html">Incident Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_ioc_parser_v2/README.html">IOC Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_ipinfo/README.html">IPInfo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_isitphishing/README.html">IsItPhishing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_jira/README.html">Jira</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_joe_sandbox_analysis/README.html">Joe Sandbox Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_kafka/README.html">Kafka</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_ldap_utilities/README.html">IBM SOAR LDAP Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_maas360/README.html">MaaS360</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_mandiant/README.html">Mandiant Threat Intelligence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_mcafee_atd/README.html">McAfee ATD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_mcafee_esm/README.html">McAfee ESM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_mcafee_opendxl/README.html">McAfee OpenDXL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_mcafee_tie/README.html">McAfee TIE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_microsoft_defender/README.html">Microsoft Defender</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_microsoft_security_graph/README.html">Microsoft Security Graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_microsoft_sentinel/README.html">Microsoft Sentinel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_misp/README.html">MISP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_mitre_integration/README.html">MITRE ATT&amp;CK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_mxtoolbox/README.html">About MxToolBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_netdevice/README.html">netMiko</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_network_utilities/README.html">Network Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_ocr/README.html">Image OCR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_odbc_query/README.html">ODBC Query</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_outbound_email/README.html">Outbound Email</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_pagerduty/README.html">PagerDuty</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_parse_utilities/README.html">Parse Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_passivetotal/README.html">PassiveTotal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_pastebin/README.html">PasteBin Creator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_phish_ai/README.html">Phish.AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_phish_tank/README.html">PhishTank Lookup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_pipl/README.html">Pipl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_playbook_maker/README.html">Playbook Maker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_playbook_utils/README.html">Playbook Utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_proofpoint_tap/README.html">Proofpoint TAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_proofpoint_trap/README.html">Proofpoint TRAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_pulsedive/README.html">Pulsedive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_qradar_advisor/README.html">QRadar Advisor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_qradar_enhanced_data/README.html">QRadar Enhanced Data Migration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_qradar_integration/README.html">QRadar Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_query_tor_network/README.html">TOR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_randori/README.html">Randori</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_reaqta/README.html">QRadar EDR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_remedy/README.html">Remedy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_rsa_netwitness/README.html">RSA NetWitness</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_soar_utils/README.html">SOAR Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_scheduler/README.html">Scheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_secureworks_ctp/README.html">Secureworks CTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_sentinelone/README.html">SentinelOne</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_sep/README.html">Symantec Endpoint Protection</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../fn_service_now/README.html">ServiceNow</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of ServiceNow</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../fn_service_now/docs/install_guide/README.html">ServiceNow Installation Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fn_service_now/docs/customize_snow_guide/README.html">ServiceNow Customization Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fn_service_now/docs/customize_resilient_guide/README.html">SOAR Customization Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fn_shadowserver/README.html">Shadowserver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_shodan/README.html">Shodan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_siemplify/README.html">Siemplify</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_slack/README.html">Slack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_snapshot_url/README.html">Snapshot URL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_spamhaus_query/README.html">Spamhaus Lookup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_splunk_integration/README.html">Splunk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_symantec_dlp/README.html">Symantec DLP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_task_utils/README.html">Task Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_teams/README.html">Microsoft Teams</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_threatminer/README.html">ThreatMiner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_timer/README.html">Timer Function</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_trusteer_ppd/README.html">Trusteer Pinpoint Detect</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_twilio/README.html">Twilio SMS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_twitter_most_popular/README.html">Twitter Search API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_url_to_dns/README.html">URL to DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_urlhaus/README.html">URLhaus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_urlscanio/README.html">URLScan.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_utilities/README.html">Utilities (Deprecated)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_virustotal/README.html">VirusTotal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_vmray_analyzer/README.html">VMRay Sandbox Analyzer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_watson_translate/README.html">Watson Translate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_webex/README.html">Cisco Webex</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_whois/README.html">Whois</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_whois_rdap/README.html">Whois RDAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_wiki/README.html">SOAR Wiki</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_wiz/README.html">Wiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_xforce/README.html">IBM XForce Collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_yeti/README.html">Yeti</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fn_zia/README.html">Zscaler Internet Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_data_feed/README.html">Data Feed Extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_data_feed_plugin_elasticfeed/README.html">Data Feed Elasticsearch Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_data_feed_plugin_kafkafeed/README.html">Data Feed KafkaFeed Plugin</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_data_feed_plugin_resilientfeed/README.html">Data Feeder for SOAR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc_data_feed_plugin_splunkfeed/README.html">Data Feed plugin for Splunk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc-cts-abuseipdb/README.html">AbuseIPDB Threat Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc-cts-haveibeenpwned/README.html">Have I Been Pwned Threat Searcher</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc-cts-mcafeetie/README.html">McAfee TIE Threat Searcher</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc-cts-passivetotal/README.html">RiskIQ PassiveTotal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc-cts-shadowserver/README.html">ShadowServer Threat Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rc-cts-urlscanio/README.html">URLScan IO Threat Searcher</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          

<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <p><img alt="screenshot" src="../_images/logo.png" /></p>
<hr class="docutils" />
<section id="technical-workshop-guide-resilient-circuits">
<h1>Technical Workshop Guide: <em>resilient-circuits</em><a class="headerlink" href="#technical-workshop-guide-resilient-circuits" title="Link to this heading">¶</a></h1>
<p><em>This guide was originally supplied with its own OVA that was setup with all the prerequisites. Use this as a reference only</em></p>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading">¶</a></h2>
<ol class="arabic">
<li><p><strong>Setup a Resilient OVA running in VirtualBox</strong></p></li>
<li><p><strong>Register your RHEL account</strong>:</p>
<blockquote>
<div><p><em>For IBM Internal Users:</em>
<strong>Subscribe RHEL device using subscription-manager</strong></p>
<ul class="simple">
<li><p>Go to <a class="reference external" href="https://ftp3.linux.ibm.com/files/redhat/">https://ftp3.linux.ibm.com/files/redhat/</a></p></li>
<li><p>Login with IBM Intranet Credentials</p></li>
<li><p>Open <code class="docutils literal notranslate"><span class="pre">ibm-rhsm.sh</span></code> file</p></li>
<li><p><strong>SSH</strong> into RHEL device</p></li>
<li><p><strong>Copy contents</strong> of <code class="docutils literal notranslate"><span class="pre">ibm-rhsm.sh</span></code> to clipboard and save to RHEL device using <strong>vim</strong></p></li>
<li><p>Give script <strong>permissions</strong></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ chmod u=rwx ibm-rhsm.sh
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Run</strong> script</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ./ibm-rhsm.sh
</pre></div>
</div>
<ul class="simple">
<li><p>You will be asked to enter a <code class="docutils literal notranslate"><span class="pre">username</span></code> and <code class="docutils literal notranslate"><span class="pre">password</span></code></p></li>
<li><p>To get these details you must register with the <strong>LTC Infrastructure Site</strong></p></li>
<li><p><a class="reference external" href="https://ftp3.linux.ibm.com/myaccount/access.php">See here</a></p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>Install Docker</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">yum</span><span class="o">-</span><span class="n">utils</span> <span class="n">device</span><span class="o">-</span><span class="n">mapper</span><span class="o">-</span><span class="n">persistent</span><span class="o">-</span><span class="n">data</span> <span class="n">lvm2</span> 
<span class="n">sudo</span> <span class="n">subscription</span><span class="o">-</span><span class="n">manager</span> <span class="n">repos</span> <span class="o">--</span><span class="n">enable</span><span class="o">=</span><span class="n">rhel</span><span class="o">-</span><span class="mi">7</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">extras</span><span class="o">-</span><span class="n">rpms</span>
<span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">container</span><span class="o">-</span><span class="n">selinux</span>
<span class="n">sudo</span> <span class="n">yum</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">manager</span> \
    <span class="o">--</span><span class="n">add</span><span class="o">-</span><span class="n">repo</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="o">.</span><span class="n">docker</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">centos</span><span class="o">/</span><span class="n">docker</span><span class="o">-</span><span class="n">ce</span><span class="o">.</span><span class="n">repo</span>
<span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">docker</span><span class="o">-</span><span class="n">ce</span>
<span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">start</span> <span class="n">docker</span>
<span class="n">sudo</span> <span class="n">usermod</span> <span class="o">-</span><span class="n">aG</span> <span class="n">docker</span> <span class="n">resadmin</span>
<span class="n">sudo</span> <span class="n">docker</span> <span class="n">ps</span> <span class="o">-</span><span class="n">a</span>
</pre></div>
</div>
<ul class="simple">
<li><p>You must logout and login to use docker without sudo</p></li>
</ul>
</li>
<li><p><strong>Configure PSQL</strong></p>
<ul>
<li><p>Open the PSQL connection</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="o">-</span><span class="n">u</span> <span class="n">postgres</span> <span class="o">-</span><span class="n">i</span> <span class="n">psql</span> <span class="n">postgres</span>
</pre></div>
</div>
</li>
<li><p>Paste the following command then hit enter</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">systems</span> <span class="p">(</span>
<span class="n">name</span> <span class="n">text</span><span class="p">,</span>
<span class="n">sys_ipaddr</span> <span class="n">text</span><span class="p">,</span>
<span class="n">sys_type</span> <span class="n">text</span><span class="p">,</span>
<span class="n">sys_os</span> <span class="n">text</span><span class="p">,</span>
<span class="n">sys_os_version</span> <span class="n">text</span><span class="p">,</span>
<span class="n">sys_owner_email</span> <span class="n">text</span>
<span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>Paste the following command then hit enter</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">systems</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">sys_ipaddr</span><span class="p">,</span> <span class="n">sys_type</span><span class="p">,</span> <span class="n">sys_os</span><span class="p">,</span> <span class="n">sys_os_version</span><span class="p">,</span> <span class="n">sys_owner_email</span><span class="p">)</span>
<span class="n">VALUES</span>
<span class="p">(</span><span class="s1">&#39;win1234&#39;</span><span class="p">,</span> <span class="s1">&#39;10.10.10.10&#39;</span><span class="p">,</span> <span class="s1">&#39;laptop&#39;</span><span class="p">,</span> <span class="s1">&#39;windows&#39;</span><span class="p">,</span> <span class="s1">&#39;10&#39;</span><span class="p">,</span> <span class="s1">&#39;fry@planetexpress.com&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;win2345&#39;</span><span class="p">,</span> <span class="s1">&#39;10.10.10.11&#39;</span><span class="p">,</span> <span class="s1">&#39;server&#39;</span><span class="p">,</span> <span class="s1">&#39;windows server&#39;</span><span class="p">,</span> <span class="s1">&#39;2016&#39;</span><span class="p">,</span> <span class="s1">&#39;professor@planetexpress.com&#39;</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>Test success with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">systems</span><span class="p">;</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p><strong>Install LDAP:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">yum</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">openldap</span><span class="o">-</span><span class="n">clients</span>
<span class="n">docker</span> <span class="n">run</span> \
    <span class="o">--</span><span class="n">restart</span> <span class="n">always</span> \
    <span class="o">--</span><span class="n">privileged</span> <span class="o">-</span><span class="n">d</span> \
    <span class="o">-</span><span class="n">p</span> <span class="mi">389</span><span class="p">:</span><span class="mi">389</span> \
    <span class="n">rroemhild</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">openldap</span>
</pre></div>
</div>
</li>
<li><p><strong>Install GRR</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">~/</span><span class="n">grr</span><span class="o">-</span><span class="n">docker</span>
<span class="n">sudo</span> <span class="n">docker</span> <span class="n">run</span> \
  <span class="o">--</span><span class="n">name</span> <span class="n">grr</span><span class="o">-</span><span class="n">server</span> <span class="o">-</span><span class="n">v</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">resadmin</span><span class="o">/</span><span class="n">grr</span><span class="o">-</span><span class="n">docker</span><span class="o">/</span><span class="n">db</span><span class="p">:</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">grr</span><span class="o">-</span><span class="n">datastore</span> \
  <span class="o">-</span><span class="n">v</span> <span class="o">~/</span><span class="n">grr</span><span class="o">-</span><span class="n">docker</span><span class="o">/</span><span class="n">logs</span><span class="p">:</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span> \
  <span class="o">-</span><span class="n">e</span> <span class="n">EXTERNAL_HOSTNAME</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span> \
  <span class="o">-</span><span class="n">e</span> <span class="n">ADMIN_PASSWORD</span><span class="o">=</span><span class="s2">&quot;resilient&quot;</span> \
  <span class="o">--</span><span class="n">ulimit</span> <span class="n">nofile</span><span class="o">=</span><span class="mi">1048576</span><span class="p">:</span><span class="mi">1048576</span> \
  <span class="o">-</span><span class="n">p</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8000</span><span class="p">:</span><span class="mi">8000</span> <span class="o">-</span><span class="n">p</span> <span class="mf">0.0.0.0</span><span class="p">:</span><span class="mi">8080</span><span class="p">:</span><span class="mi">8080</span> \
  <span class="o">-</span><span class="n">d</span> <span class="n">grrdocker</span><span class="o">/</span><span class="n">grr</span><span class="p">:</span><span class="n">v3</span><span class="mf">.2.3.2</span> <span class="n">grr</span>
</pre></div>
</div>
</li>
<li><p><strong>Test Docker</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">ps</span> <span class="o">-</span><span class="n">a</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="reference">
<h1>Reference<a class="headerlink" href="#reference" title="Link to this heading">¶</a></h1>
<ul class="simple">
<li><p>Docs: https://developer.ibm.com/security/resilient/start/</p></li>
<li><p>App Exchange: https://exchange.xforce.ibmcloud.com/hub/Resilient</p></li>
</ul>
<hr class="docutils" />
<section id="step-1-check-which-python-version-is-installed">
<h2>Step 1: <em>Check which Python Version is installed</em><a class="headerlink" href="#step-1-check-which-python-version-is-installed" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Open <strong>Terminal</strong></p></li>
<li><p>Check Python version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python --version
</pre></div>
</div>
</li>
<li><p>Output should be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Python</span> <span class="mf">2.7.15</span>
</pre></div>
</div>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="step-2-make-sure-resilient-license-is-valid">
<h2>Step 2: <em>Make sure Resilient License is Valid</em><a class="headerlink" href="#step-2-make-sure-resilient-license-is-valid" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Open <strong>Terminal</strong></p></li>
<li><p>Check valid license is configured:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo resutil license
</pre></div>
</div>
<blockquote>
<div><p><strong>NOTE:</strong> your sudo password is <code class="docutils literal notranslate"><span class="pre">resilient</span></code></p>
</div></blockquote>
</li>
<li><p>If it <strong>does not exist</strong> or is <strong>expired</strong>, source a valid license and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo license-import
</pre></div>
</div>
</li>
<li><p><strong>Paste</strong> your valid license and hit <strong>Enter</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-----</span><span class="n">BEGIN</span> <span class="n">LICENSE</span><span class="o">-----</span>
<span class="n">xxx</span>
<span class="o">-----</span><span class="n">END</span> <span class="n">LICENSE</span><span class="o">-----</span>
</pre></div>
</div>
</li>
<li><p><strong>Restart</strong> the Resilient Service:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo service resilient restart
</pre></div>
</div>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="step-3-install-resilient-circuits">
<h2>Step 3: <em>Install Resilient Circuits</em><a class="headerlink" href="#step-3-install-resilient-circuits" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Open <strong>Terminal</strong>
<img alt="screenshot" src="../_images/551.png" /></p></li>
<li><p>Install resilient-circuits using <strong>pip</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install resilient-circuits
</pre></div>
</div>
<blockquote>
<div><p><strong>NOTE:</strong> you will need a connection to the Internet to install.  We have pre-downloaded all necessary packages for this tutorial:
To install <strong>without an Internet Connection:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install --no-index --find-links=/home/resadmin/Desktop/local_pip resilient-circuits
</pre></div>
</div>
</div></blockquote>
<p><img alt="screenshot" src="../_images/27.png" /></p>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="step-4-configure-resilient-circuits">
<h2>Step 4: <em>Configure Resilient Circuits</em><a class="headerlink" href="#step-4-configure-resilient-circuits" title="Link to this heading">¶</a></h2>
<section id="resilient-circuits-configurations-are-maintained-in-the-app-config-file">
<h3><em>Resilient Circuits configurations are maintained in the app.config file</em><a class="headerlink" href="#resilient-circuits-configurations-are-maintained-in-the-app-config-file" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Open terminal</p></li>
<li><p>Auto generate the <strong>app.config file</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits config -c
</pre></div>
</div>
</li>
<li><p>This creates <code class="docutils literal notranslate"><span class="pre">/home/resadmin/.resilient/app.config</span></code></p></li>
<li><p>Open this file in <strong>VS Code:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ code /home/resadmin/.resilient/app.config
</pre></div>
</div>
</li>
<li><p>Replace the contents with these configuration settings:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">resilient</span><span class="p">]</span>
<span class="n">host</span><span class="o">=</span><span class="n">localhost</span>
<span class="n">port</span><span class="o">=</span><span class="mi">443</span>
<span class="n">email</span><span class="o">=</span><span class="n">integrations</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span>
<span class="n">password</span><span class="o">=</span><span class="n">ResDemo123</span>
<span class="n">org</span><span class="o">=</span><span class="n">Dev</span>
<span class="n">componentsdir</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">resadmin</span><span class="o">/.</span><span class="n">resilient</span><span class="o">/</span><span class="n">components</span>
<span class="n">logdir</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">resadmin</span><span class="o">/.</span><span class="n">resilient</span>
<span class="n">logfile</span><span class="o">=</span><span class="n">app</span><span class="o">.</span><span class="n">log</span>
<span class="n">loglevel</span><span class="o">=</span><span class="n">INFO</span>
<span class="n">cafile</span><span class="o">=</span><span class="n">false</span>
</pre></div>
</div>
</li>
<li><p><strong>Save</strong> by pressing <strong>CTRL+S</strong></p></li>
<li><p>Open Terminal</p></li>
<li><p>Create the <strong>components directory:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir /home/resadmin/.resilient/components
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="step-5-create-user-accounts">
<h2>Step 5: <em>Create User Accounts</em><a class="headerlink" href="#step-5-create-user-accounts" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Open <strong>Terminal</strong></p></li>
<li><p>Create two users:</p>
<ul>
<li><p>An <strong>Admin User</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo resutil newuser -createorg -org &quot;Dev&quot; -email &quot;resadmin@example.com&quot; -first &quot;Res&quot; -last &quot;Admin&quot; -password &quot;ResDemo123&quot;
</pre></div>
</div>
<blockquote>
<div><p><strong>NOTE:</strong> your sudo password is <code class="docutils literal notranslate"><span class="pre">resilient</span></code></p>
</div></blockquote>
</li>
<li><p>An <strong>Integrations Engine User</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo resutil newuser -org &quot;Dev&quot; -email &quot;integrations@example.com&quot; -first &quot;Orchestration&quot; -last &quot;Engine&quot; -password &quot;ResDemo123&quot;
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="step-6-run-resilient-circuits">
<h2>Step 6: <em>Run Resilient Circuits</em><a class="headerlink" href="#step-6-run-resilient-circuits" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Open <strong>Terminal</strong></p></li>
<li><p>Run resilient-circuits:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits run
</pre></div>
</div>
</li>
<li><p>You should get this output if <code class="docutils literal notranslate"><span class="pre">resilient-circuits</span></code> is running successfully:
<img alt="screenshot" src="../_images/64.png" /></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-7-install-fn-utilities">
<h2>Step 7: <em>Install FN Utilities</em><a class="headerlink" href="#step-7-install-fn-utilities" title="Link to this heading">¶</a></h2>
<ul>
<li><p><strong>Stop</strong> <code class="docutils literal notranslate"><span class="pre">resilient-circuits</span></code> by pressing <strong>CTRL+C</strong></p></li>
<li><p><strong>Download</strong> the package from <a class="reference external" href="https://exchange.xforce.ibmcloud.com/hub/extension/2b6699ac8a3976b67dfbddee26dbe3a5">https://exchange.xforce.ibmcloud.com/hub/extension/2b6699ac8a3976b67dfbddee26dbe3a5</a></p>
<ul class="simple">
<li><p><em>You may need to register for an <strong>X-Force Exchange Account</strong></em></p></li>
</ul>
</li>
<li><p>Open <strong>Terminal</strong></p></li>
<li><p>Change to your <strong>Downloads</strong> folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /home/resadmin/Downloads/
</pre></div>
</div>
<blockquote>
<div><p><strong>NOTE:</strong> you will need a connection to the Internet to download and install. We have pre-downloaded all necessary packages for this tutorial:
To install <strong>without an Internet Connection:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install --no-index --find-links=/home/resadmin/Desktop/local_pip /home/resadmin/Desktop/local_appx/fn_utilities-1.0.3.tar.gz 
</pre></div>
</div>
<ul class="simple">
<li><p>Skip to <strong>importing the configurations</strong></p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>Unzip</strong> the package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ unzip fn_utilities-x.x.x.zip
</pre></div>
</div>
</li>
<li><p><strong>Install</strong> FN Utilities using pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install fn_utilities-x.x.x.tar.gz
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/73.png" /></p>
</li>
<li><p>Import <strong>configurations</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits config -u
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/82.png" /></p>
</li>
<li><p>Import <strong>customizations</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits customize -y
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/93.png" /></p>
</li>
<li><p><strong>Start</strong> Resilient Circuits:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits run
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/102.png" /></p>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="step-8-testing-fn-utilities">
<h2>Step 8: <em>Testing FN Utilities</em><a class="headerlink" href="#step-8-testing-fn-utilities" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Go to <strong>Resilient UI</strong></p>
<ul class="simple">
<li><p>Go to your Desktop and open <strong>FireFox</strong></p></li>
<li><p>Go to: <code class="docutils literal notranslate"><span class="pre">https://localhost</span></code></p></li>
</ul>
</li>
<li><p>Login:</p>
<ul class="simple">
<li><p>Email: <code class="docutils literal notranslate"><span class="pre">resadmin&#64;example.com</span></code></p></li>
<li><p>Password: <code class="docutils literal notranslate"><span class="pre">ResDemo123</span></code></p></li>
</ul>
</li>
<li><p>Create an <strong>Incident</strong></p>
<ul class="simple">
<li><p>Name: <code class="docutils literal notranslate"><span class="pre">Integrations</span> <span class="pre">Demo</span></code></p></li>
</ul>
</li>
<li><p>Add an <strong>Artifact</strong> to that Incident</p>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">DNS</span> <span class="pre">Name</span></code></p></li>
<li><p>Value: <code class="docutils literal notranslate"><span class="pre">resilientsystems.com</span></code></p></li>
</ul>
</li>
<li><p>Click the <strong>Take Action Button</strong> and run the <strong>Example: Shell Command</strong> Workflow on that Artifact:
<img alt="screenshot" src="../_images/122.png" /></p></li>
<li><p>Check your <strong>terminal:</strong>
<img src="./screenshots/13.png" alt="screenshot" width="100%"/></p></li>
<li><p>See the results in the <strong>Notes Tab</strong> of your Resilient Incident:
<img alt="screenshot" src="../_images/141.png" /></p></li>
<li><p>Can also see <strong>DEBUG Information</strong> in the <strong>Action Status</strong> which is located just under the navigation bar on the right-hand side:
<img src="./screenshots/48.png" alt="screenshot" width="30%"/>
<img src="./screenshots/15.png" alt="screenshot" width="69%"/></p></li>
<li><p>You may find that <code class="docutils literal notranslate"><span class="pre">traceroute</span></code> is not installed on your VM. Ctrl+C quit resilient-circuits and then install with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo yum install -y traceroute
</pre></div>
</div>
<ul class="simple">
<li><p>Restart <code class="docutils literal notranslate"><span class="pre">resilient-circuits</span> <span class="pre">run</span></code> after</p></li>
</ul>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="step-9-create-new-custom-workflow-that-uses-our-shell-command-function">
<h2>Step 9: <em>Create new Custom Workflow that uses our Shell Command Function</em><a class="headerlink" href="#step-9-create-new-custom-workflow-that-uses-our-shell-command-function" title="Link to this heading">¶</a></h2>
<ul>
<li><p>In the Resilient UI, go to <strong>Customization Settings,</strong> under your username on the right-hand side of the navigation bar</p></li>
<li><p>Click the <strong>Workflows Tab</strong></p></li>
<li><p><strong>Create</strong> a new Workflow</p>
<ul class="simple">
<li><p>Name: <strong>nslookup</strong></p></li>
<li><p>Object Type: <strong>Artifact</strong>
<img alt="screenshot" src="../_images/162.png" /></p></li>
</ul>
</li>
<li><p>Add an <strong>End Event</strong> <em>(the dark black circle icon)</em> to the canvas</p></li>
<li><p>Add the function <strong>Utilities: Shell Command</strong> to the Workflow Canvas by clicking on the function icon and selecting <strong>Utilities: Shell Command</strong> from the dropdown menu</p></li>
<li><p>Edit the <strong>Pre-Process Script:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">inputs</span><span class="o">.</span><span class="n">shell_command</span> <span class="o">=</span> <span class="s2">&quot;nslookup&quot;</span>
<span class="n">inputs</span><span class="o">.</span><span class="n">shell_remote</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">inputs</span><span class="o">.</span><span class="n">shell_param1</span> <span class="o">=</span> <span class="n">artifact</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/172.png" /></p>
</li>
<li><p>Edit the <strong>Post-Process Script:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">note_text</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;Command succeeded: </span><span class="si">{}</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">commandline</span><span class="p">,</span> <span class="n">results</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>

<span class="n">incident</span><span class="o">.</span><span class="n">addNote</span><span class="p">(</span><span class="n">helper</span><span class="o">.</span><span class="n">createPlainText</span><span class="p">(</span><span class="n">note_text</span><span class="p">))</span>
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/181.png" /></p>
</li>
<li><p>Close the <strong>Function Editor</strong> and drag/scroll the function into view on the canvas</p></li>
<li><p>Using the <strong>connectors</strong> <em>(the black arrow icon)</em>, join the start event to the function and then the function to the end event
<img alt="screenshot" src="../_images/541.png" /></p></li>
<li><p>Click <strong>Save &amp; Close</strong></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-10-create-new-custom-rule-that-runs-our-workflow">
<h2>Step 10: <em>Create new Custom Rule that runs our Workflow</em><a class="headerlink" href="#step-10-create-new-custom-rule-that-runs-our-workflow" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Click the <strong>Rules Tab</strong></p></li>
<li><p>Create a new <strong>Menu Item Rule:</strong></p>
<ul>
<li><p>Display Name: <strong>Nslookup</strong></p></li>
<li><p>Object Type: <strong>Artifact</strong></p></li>
<li><p>Workflows: <strong>nslookup</strong>
<img alt="screenshot" src="../_images/201.png" /></p></li>
</ul>
</li>
<li><p>Click <strong>Save &amp; Close</strong></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-11-run-our-custom-workflow">
<h2>Step 11: <em>Run our Custom Workflow</em><a class="headerlink" href="#step-11-run-our-custom-workflow" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Go to your <strong>Incident</strong></p></li>
<li><p>Click the <strong>Artifacts Tab</strong></p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">nslookup</span></code> workflow on the <code class="docutils literal notranslate"><span class="pre">resilientsystems.com</span></code> Artifact
<img alt="screenshot" src="../_images/212.png" /></p></li>
<li><p>See the <strong>logs in the terminal</strong> and results in the <strong>Notes Tab</strong>
<img alt="screenshot" src="../_images/222.png" /></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-12-start-docker">
<h2>Step 12: <em>Start Docker</em><a class="headerlink" href="#step-12-start-docker" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Open <strong>Terminal</strong></p></li>
<li><p><strong>Stop</strong> <code class="docutils literal notranslate"><span class="pre">resilient-circuits</span></code> by pressing <strong>CTRL+C</strong></p></li>
<li><p><strong>Start</strong> docker:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo systemctl start docker
</pre></div>
</div>
</li>
<li><p>Check <strong>docker</strong> is running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker ps -a
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/232.png" /></p>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="step-13-ensure-openldap-is-configured-and-running">
<h2>Step 13: <em>Ensure OpenLDAP is Configured and Running</em><a class="headerlink" href="#step-13-ensure-openldap-is-configured-and-running" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ldapwhoami -vvv -h localhost -p 389 -D &quot;cn=Philip J. Fry,ou=people,dc=planetexpress,dc=com&quot; -x -w &quot;fry&quot;
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/242.png" /></p>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="step-14-install-the-ldap-utilities-function">
<h2>Step 14: <em>Install the LDAP Utilities Function</em><a class="headerlink" href="#step-14-install-the-ldap-utilities-function" title="Link to this heading">¶</a></h2>
<ul>
<li><p>This is very similar to install the previous <code class="docutils literal notranslate"><span class="pre">fn_utilities</span></code> function</p></li>
<li><p><strong>Download</strong> the package from <a class="reference external" href="https://exchange.xforce.ibmcloud.com/hub/extension/72b8204066d3b290b68bae2eeb1942cd">https://exchange.xforce.ibmcloud.com/hub/extension/72b8204066d3b290b68bae2eeb1942cd</a></p></li>
<li><p>Open <strong>Terminal</strong></p></li>
<li><p>Change to your <strong>Downloads</strong> folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /home/resadmin/Downloads/
</pre></div>
</div>
<blockquote>
<div><p><strong>NOTE:</strong> you will need a connection to the Internet to download and install. We have pre-downloaded all necessary packages for this tutorial:
To install <strong>without an Internet Connection:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install --no-index --find-links=/home/resadmin/Desktop/local_pip /home/resadmin/Desktop/local_appx/fn_ldap_utilities-1.0.0.tar.gz 
</pre></div>
</div>
<ul class="simple">
<li><p>Skip to <strong>importing the configurations</strong></p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>Unzip</strong> the package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ unzip fn_ldap_utilities-x.x.x.zip
</pre></div>
</div>
</li>
<li><p><strong>Install</strong> FN LDAP Utilities using pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install fn_ldap_utilities-x.x.x.tar.gz
</pre></div>
</div>
</li>
<li><p>Import <strong>configurations</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits config -u
</pre></div>
</div>
</li>
<li><p>Import <strong>customizations</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits customize
</pre></div>
</div>
<blockquote>
<div><p><strong>NOTE:</strong> Only type <strong>Y</strong> to the <code class="docutils literal notranslate"><span class="pre">fn_ldap_utilities</span></code> prompts</p>
</div></blockquote>
<p><img alt="screenshot" src="../_images/252.png" /></p>
</li>
<li><p><strong>Start</strong> resilient-circuits:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits run
</pre></div>
</div>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="step-15-configure-ldap-utilities">
<h2>Step 15: <em>Configure LDAP Utilities</em><a class="headerlink" href="#step-15-configure-ldap-utilities" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Open <code class="docutils literal notranslate"><span class="pre">/home/resadmin/.resilient/app.config</span></code> in <strong>VS Code</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ code /home/resadmin/.resilient/app.config
</pre></div>
</div>
</li>
<li><p>Update the settings under <code class="docutils literal notranslate"><span class="pre">[fn_ldap_utilities]</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">fn_ldap_utilities</span><span class="p">]</span>
<span class="n">ldap_server</span><span class="o">=</span><span class="mf">127.0.0.1</span> 
<span class="n">ldap_port</span><span class="o">=</span><span class="mi">389</span> 
<span class="n">ldap_use_ssl</span><span class="o">=</span><span class="kc">False</span> 
<span class="n">ldap_auth</span><span class="o">=</span><span class="n">SIMPLE</span> 
<span class="n">ldap_user_dn</span><span class="o">=</span><span class="n">cn</span><span class="o">=</span><span class="n">admin</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">planetexpress</span><span class="p">,</span><span class="n">dc</span><span class="o">=</span><span class="n">com</span> 
<span class="n">ldap_password</span><span class="o">=</span><span class="n">GoodNewsEveryone</span> 
<span class="n">ldap_is_active_directory</span><span class="o">=</span><span class="kc">False</span> 
<span class="n">ldap_connect_timeout</span><span class="o">=</span><span class="mi">10</span>
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/261.png" /></p>
</li>
<li><p>Update <strong>Search Base</strong> in LDAP Search Function:</p>
<ul>
<li><p>Customization Settings &gt; Workflows &gt; <strong>Example: LDAP Utilities: Search</strong></p></li>
<li><p>Click Search Function</p></li>
<li><p>Edit ldap_search_base in the <strong>Pre-Processing Script</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">inputs</span><span class="o">.</span><span class="n">ldap_search_base</span> <span class="o">=</span> <span class="s2">&quot;dc=planetexpress,dc=com&quot;</span>
<span class="n">inputs</span><span class="o">.</span><span class="n">ldap_search_filter</span> <span class="o">=</span> <span class="s2">&quot;(&amp;(mail=</span><span class="si">%ld</span><span class="s2">ap_param%))&quot;</span>
<span class="n">inputs</span><span class="o">.</span><span class="n">ldap_search_param</span> <span class="o">=</span>  <span class="n">artifact</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/271.png" /></p>
</li>
</ul>
</li>
<li><p>Click <strong>Save &amp; Close</strong></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-16-run-ldap-search-function">
<h2>Step 16: <em>Run LDAP Search Function</em><a class="headerlink" href="#step-16-run-ldap-search-function" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Go to your Incident</p></li>
<li><p>Add an <strong>Artifact</strong> to that Incident</p>
<ul>
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">Email</span> <span class="pre">Sender</span></code></p></li>
<li><p>Value: <code class="docutils literal notranslate"><span class="pre">fry&#64;planetexpress.com</span></code></p></li>
</ul>
</li>
<li><p>Click the <strong>Take Action Button</strong> and run the <strong>Example: LDAP Utilities: Search</strong>
<img alt="screenshot" src="../_images/28.png" /></p></li>
<li><p>Check your <strong>Terminal Output</strong>
<img alt="screenshot" src="../_images/56.png" /></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-17-view-ldap-search-results-in-resilient-ui">
<h2>Step 17: <em>View LDAP Search Results in Resilient UI</em><a class="headerlink" href="#step-17-view-ldap-search-results-in-resilient-ui" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Go to Customization Settings -&gt; Layouts -&gt; Manage Tabs</p></li>
<li><p>Add a <strong>New Tab:</strong></p>
<ul>
<li><p>Incident Tabs &gt; Manage Tabs &gt; + Add Tab
<img alt="screenshot" src="../_images/57.png" /></p></li>
<li><p>Tab Text: <strong>Users &amp; Systems</strong></p></li>
<li><p>Tab Visible: <strong>Yes</strong>
<img alt="screenshot" src="../_images/58.png" /></p></li>
<li><p>Click <strong>Add</strong></p></li>
</ul>
</li>
<li><p>Now <strong>drag</strong> the <strong>LDAP Query results</strong> Datatable into the Users &amp; Systems Tab:
<img alt="screenshot" src="../_images/59.png" /></p></li>
<li><p><strong>Save</strong> the layout and go back to your incident</p></li>
<li><p>Go to the new <strong>Users &amp; Systems</strong> tab, you will see the LDAP lookup result:
<img alt="screenshot" src="../_images/30.png" /></p></li>
<li><p><strong>Add a new Email Sender Artifact</strong> of <code class="docutils literal notranslate"><span class="pre">professor&#64;planetexpress.com</span></code></p></li>
<li><p>Run the LDAP Search Function again</p></li>
<li><p>Check the result
<img alt="screenshot" src="../_images/312.png" /></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-18-install-configure-the-cmdb-function">
<h2>Step 18: <em>Install &amp; Configure the CMDB Function</em><a class="headerlink" href="#step-18-install-configure-the-cmdb-function" title="Link to this heading">¶</a></h2>
<ul>
<li><p><strong>Stop</strong> <code class="docutils literal notranslate"><span class="pre">resilient-circuits</span></code> by pressing <strong>CTRL+C</strong></p></li>
<li><p><strong>Download</strong> the package from <a class="reference external" href="https://exchange.xforce.ibmcloud.com/hub/extension/a51eb932122b9f71062e9ed8705f35f0">https://exchange.xforce.ibmcloud.com/hub/extension/a51eb932122b9f71062e9ed8705f35f0</a></p></li>
<li><p>Open <strong>Terminal</strong></p></li>
<li><p>Change to your <strong>Downloads</strong> folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /home/resadmin/Downloads/
</pre></div>
</div>
<blockquote>
<div><p><strong>NOTE:</strong> you will need a connection to the Internet to download and install. We have pre-downloaded all necessary packages for this tutorial:
To install <strong>without an Internet Connection:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install --no-index --find-links=/home/resadmin/Desktop/local_pip /home/resadmin/Desktop/local_appx/fn_odbc_query-1.0.0.tar.gz 
</pre></div>
</div>
<ul class="simple">
<li><p>Skip to <strong>importing the configurations</strong></p></li>
</ul>
</div></blockquote>
</li>
<li><p><strong>Unzip</strong> the package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ unzip fn_odbc_query-x.x.x.zip
</pre></div>
</div>
</li>
<li><p><strong>Install</strong> FN ODBC using pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install fn_odbc_query-x.x.x.tar.gz
</pre></div>
</div>
</li>
<li><p>Import <strong>configurations</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits config -u
</pre></div>
</div>
</li>
<li><p>Import <strong>customizations</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits customize
</pre></div>
</div>
<blockquote>
<div><p><strong>NOTE:</strong> Only type <strong>Y</strong> to the <code class="docutils literal notranslate"><span class="pre">fn_odbc_query</span></code> prompts</p>
</div></blockquote>
</li>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">app.config</span></code> file in <strong>VS Code</strong></p></li>
<li><p><strong>Replace</strong> the <code class="docutils literal notranslate"><span class="pre">sql_connection_string</span></code> value with below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">fn_odbc_query</span><span class="p">]</span>
<span class="n">sql_connection_string</span><span class="o">=</span><span class="n">Driver</span><span class="o">=</span><span class="p">{</span><span class="n">PostgreSQL</span><span class="p">};</span><span class="n">Server</span><span class="o">=</span><span class="n">localhost</span><span class="p">;</span><span class="n">Port</span><span class="o">=</span><span class="mi">5555</span><span class="p">;</span><span class="n">Database</span><span class="o">=</span><span class="n">postgres</span><span class="p">;</span><span class="n">Uid</span><span class="o">=</span><span class="n">postgres</span><span class="p">;</span><span class="n">Pwd</span><span class="o">=</span><span class="n">resilient</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p><strong>Test</strong> that our PSQL Database is working:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">psql</span> <span class="o">-</span><span class="n">h</span> <span class="n">localhost</span> <span class="o">-</span><span class="n">p</span> <span class="mi">5555</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span> <span class="o">-</span><span class="n">W</span> <span class="n">postgres</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;select * from systems;&quot;</span>
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/321.png" /></p>
</li>
<li><p><strong>Start</strong> resilient-circuits:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits run
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/60.png" /></p>
</li>
<li><p>In the Resilient UI, <strong>add a new Workflow</strong></p>
<ul class="simple">
<li><p>Name: <code class="docutils literal notranslate"><span class="pre">CMDB</span> <span class="pre">Query</span></code></p></li>
<li><p>Object Type: <code class="docutils literal notranslate"><span class="pre">Artifact</span></code></p></li>
</ul>
</li>
<li><p>Insert the <code class="docutils literal notranslate"><span class="pre">fn_odbc_query</span></code> function in to the canvas, add an <strong>End Event</strong> and connect the workflow all together using the <strong>connectors</strong></p></li>
<li><p>Click the function’s <strong>edit icon</strong> and update the function input: <code class="docutils literal notranslate"><span class="pre">sql_query</span></code> with the following query:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>select name as sql_column_1, sys_ipaddr as sql_column_2, sys_type as sql_column_3, sys_os_version as sql_column_4, sys_owner_email as sql_column_5 from systems where name = ?
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/332.png" /></p>
</li>
<li><p>Update <strong>Pre-Processing Script</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">inputs</span><span class="o">.</span><span class="n">sql_condition_value1</span> <span class="o">=</span> <span class="n">artifact</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
</li>
<li><p>Update <strong>Post-Processing Script</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#  Globals</span>

<span class="c1"># This list contains Resilient data table api field names.</span>
<span class="c1"># Exclude fist two columns &#39;sql_artifact_value&#39; and &#39;sql_timestamp&#39; from this list.</span>
<span class="c1"># Modify this list acording to your Resilent data table fields.</span>
<span class="n">RESILENT_DATATABLE_COLUMN_NAMES_LIST</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s2">&quot;sql_column_1&quot;</span><span class="p">,</span>
  <span class="s2">&quot;sql_column_2&quot;</span><span class="p">,</span>
  <span class="s2">&quot;sql_column_3&quot;</span><span class="p">,</span>
  <span class="s2">&quot;sql_column_4&quot;</span><span class="p">,</span>
  <span class="s2">&quot;sql_column_5&quot;</span><span class="p">]</span>
  
<span class="c1"># Processing</span>
<span class="kn">from</span> <span class="nn">java.util</span> <span class="kn">import</span> <span class="n">Date</span>

<span class="k">if</span> <span class="n">results</span><span class="o">.</span><span class="n">entries</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
  <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">entries</span><span class="p">:</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">incident</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="s2">&quot;sql_query_results_dt&quot;</span><span class="p">)</span>
  
    <span class="n">row</span><span class="o">.</span><span class="n">sql_artifact_value</span> <span class="o">=</span> <span class="n">artifact</span><span class="o">.</span><span class="n">value</span>
    <span class="n">row</span><span class="o">.</span><span class="n">sql_timestamp</span> <span class="o">=</span> <span class="n">Date</span><span class="p">()</span>
  
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">RESILENT_DATATABLE_COLUMN_NAMES_LIST</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">entry</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
          <span class="n">row</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
          <span class="n">row</span><span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</pre></div>
</div>
</li>
<li><p>Click <strong>Save &amp; Close</strong></p></li>
<li><p>Click the <strong>Rules tab</strong> and create a new <strong>Menu Item Rule:</strong></p>
<ul class="simple">
<li><p>Name: <code class="docutils literal notranslate"><span class="pre">CMDB</span> <span class="pre">Lookup</span></code></p></li>
<li><p>Object Type: <code class="docutils literal notranslate"><span class="pre">Artifact</span></code></p></li>
<li><p>Workflows: <code class="docutils literal notranslate"><span class="pre">CMDB</span> <span class="pre">Query</span></code>
<img alt="screenshot" src="../_images/342.png" /></p></li>
</ul>
</li>
<li><p>Click <strong>Save &amp; Close</strong></p></li>
<li><p>Go to your Incident and add a new <strong>Artifact:</strong></p>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">System</span> <span class="pre">Name</span></code></p></li>
<li><p>Value: <code class="docutils literal notranslate"><span class="pre">win1234</span></code>
<img alt="screenshot" src="../_images/352.png" /></p></li>
</ul>
</li>
<li><p><strong>Take Action</strong> with the CMDB Lookup Workflow on the Artifact and check the <strong>terminal output</strong></p></li>
<li><p>Once again you will need <strong>add the SQL Results Table</strong> to your <em>Users and Systems</em> Tab
<img alt="screenshot" src="../_images/36.png" /></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-19-setup-grr">
<h2>Step 19: <em>Setup GRR</em><a class="headerlink" href="#step-19-setup-grr" title="Link to this heading">¶</a></h2>
<ul>
<li><p><strong>Restart</strong> the GRR <strong>Docker Container</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker ps -a
$ docker restart &lt;CONTAINER-ID&gt;
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/621.png" /></p>
</li>
<li><p>First we need to link your GRR server to your RHEL Desktop</p></li>
<li><p>Open and new tab in <strong>FireFox</strong></p></li>
<li><p>Go to: <code class="docutils literal notranslate"><span class="pre">localhost:8000</span></code></p></li>
<li><p>Enter username and password:</p>
<ul class="simple">
<li><p>Username: <code class="docutils literal notranslate"><span class="pre">admin</span></code></p></li>
<li><p>Password: <code class="docutils literal notranslate"><span class="pre">resilient</span></code></p></li>
</ul>
</li>
<li><p>Click <strong>Manage Binaries</strong></p></li>
<li><p>Download <code class="docutils literal notranslate"><span class="pre">linux/installers</span> <span class="pre">/</span> <span class="pre">grr_3.2.3.2_i386.rpm</span></code> and save to your <strong>Downloads</strong>
<img alt="screenshot" src="../_images/611.png" /></p></li>
<li><p>Open <strong>Terminal</strong></p></li>
<li><p>Change to your <strong>Downloads</strong> folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /home/resadmin/Downloads/
</pre></div>
</div>
</li>
<li><p><strong>Install</strong> the package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo rpm -ivh grr_3.2.3.2_amd64.rpm
</pre></div>
</div>
</li>
<li><p>In GRR, click the <strong>magnifying glass on the search box</strong></p></li>
<li><p>You will see <strong>your agent is running</strong>
<img alt="screenshot" src="../_images/37.png" /></p></li>
</ul>
<blockquote>
<div><p><strong>NOTE:</strong> If the light is yellow, the GRR Client is not running. To <strong>restart the GRR Client</strong> use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo systemctl restart grr
</pre></div>
</div>
</div></blockquote>
</section>
<hr class="docutils" />
<section id="step-20-add-grr-message-destination-in-resilient-ui">
<h2>Step 20: <em>Add GRR Message Destination in Resilient UI</em><a class="headerlink" href="#step-20-add-grr-message-destination-in-resilient-ui" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Open <strong>Resilient UI</strong></p></li>
<li><p>Customization Settings &gt; <strong>Message Destination Tab</strong></p></li>
<li><p>Add a new <strong>Message Destination</strong></p>
<ul>
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">Queue</span></code></p></li>
<li><p>Name: <code class="docutils literal notranslate"><span class="pre">fn_grr</span></code></p></li>
<li><p>Programmatic Name: <code class="docutils literal notranslate"><span class="pre">fn_grr</span></code></p></li>
<li><p>Expect Acknowledgement: <code class="docutils literal notranslate"><span class="pre">Yes</span></code></p></li>
<li><p>Users: <code class="docutils literal notranslate"><span class="pre">Orchestration</span> <span class="pre">Engine</span> <span class="pre">(integrations&#64;example.com)</span></code>
<img alt="screenshot" src="../_images/38.png" /></p></li>
</ul>
</li>
<li><p>Click <strong>Create</strong></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-20-add-new-grr-function-in-resilient-ui">
<h2>Step 20: <em>Add New GRR Function in Resilient UI</em><a class="headerlink" href="#step-20-add-new-grr-function-in-resilient-ui" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Go to the <strong>Functions Tab</strong></p></li>
<li><p>Create a <strong>New Function:</strong></p>
<ul>
<li><p>Name: <code class="docutils literal notranslate"><span class="pre">GRR</span> <span class="pre">Search</span></code></p></li>
<li><p>API Name: <code class="docutils literal notranslate"><span class="pre">grr_search</span></code></p></li>
<li><p>Message Destination: <code class="docutils literal notranslate"><span class="pre">fn_grr</span></code></p></li>
<li><p>Description: <code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">function</span> <span class="pre">to</span> <span class="pre">search</span> <span class="pre">for</span> <span class="pre">GRR</span> <span class="pre">Agent</span></code>
<img alt="screenshot" src="../_images/39.png" /></p></li>
</ul>
</li>
<li><p>Create two <strong>Inputs Fields:</strong></p>
<ul>
<li><p>Click <strong>Add Field:</strong></p>
<ul>
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">Text</span></code></p></li>
<li><p>API Access Name: <code class="docutils literal notranslate"><span class="pre">grr_search_value</span></code></p></li>
<li><p>Requirement: <code class="docutils literal notranslate"><span class="pre">Always</span></code>
<img alt="screenshot" src="../_images/40.png" /></p></li>
</ul>
</li>
<li><p>Click <strong>Create</strong></p></li>
<li><p>Add another field by clicking <strong>Add Field</strong></p>
<ul>
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">Select</span></code></p></li>
<li><p>API Access Name: <code class="docutils literal notranslate"><span class="pre">grr_search_type</span></code></p></li>
<li><p>Requirement: <code class="docutils literal notranslate"><span class="pre">Always</span></code></p></li>
<li><p>Add/Edit Values: <code class="docutils literal notranslate"><span class="pre">ip</span> <span class="pre">user</span> <span class="pre">host</span></code></p></li>
<li><p>Blank Option: <code class="docutils literal notranslate"><span class="pre">No</span></code>
<img alt="screenshot" src="../_images/411.png" /></p></li>
</ul>
</li>
<li><p>Click <strong>Create</strong></p></li>
</ul>
</li>
<li><p>Drag the two inputs from the right panel into the <strong>Inputs</strong> panel
<img alt="screenshot" src="../_images/631.png" /></p></li>
<li><p>Click <strong>Save &amp; Close</strong></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-21-add-new-grr-workflow-in-resilient-ui">
<h2>Step 21: <em>Add New GRR Workflow in Resilient UI</em><a class="headerlink" href="#step-21-add-new-grr-workflow-in-resilient-ui" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Go to the <strong>Workflows Tab</strong></p></li>
<li><p>Click <strong>New Workflow</strong></p>
<ul class="simple">
<li><p>Name: <code class="docutils literal notranslate"><span class="pre">Example:</span> <span class="pre">GRR</span> <span class="pre">Search</span> <span class="pre">by</span> <span class="pre">IP</span></code></p></li>
<li><p>API Name: <code class="docutils literal notranslate"><span class="pre">example_grr_search_by_ip</span></code></p></li>
<li><p>Description: <code class="docutils literal notranslate"><span class="pre">An</span> <span class="pre">example</span> <span class="pre">Workflow</span> <span class="pre">using</span> <span class="pre">the</span> <span class="pre">GRR</span> <span class="pre">Search</span> <span class="pre">Function</span> <span class="pre">to</span> <span class="pre">get</span> <span class="pre">a</span> <span class="pre">GRR</span> <span class="pre">Agents</span> <span class="pre">information</span> <span class="pre">using</span> <span class="pre">their</span> <span class="pre">IP</span> <span class="pre">Address</span></code></p></li>
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">Artifact</span></code>
<img alt="screenshot" src="../_images/421.png" /></p></li>
</ul>
</li>
<li><p>Add the <strong>GRR Search Function</strong> to the <strong>Workflow Canvas</strong> and join to <strong>Start and End Events:</strong>
<img alt="screenshot" src="../_images/431.png" /></p></li>
<li><p>Make sure the input <code class="docutils literal notranslate"><span class="pre">grr_search_type</span></code> is set to <strong>ip</strong> in the <strong>Function Inputs Tab,</strong> under the Workflow Canvas</p></li>
<li><p>Edit the <strong>Pre-Process Script:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">inputs</span><span class="o">.</span><span class="n">grr_search_value</span> <span class="o">=</span> <span class="n">artifact</span><span class="o">.</span><span class="n">value</span>
</pre></div>
</div>
</li>
<li><p>Edit the <strong>Post-Process Script:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">results</span><span class="o">.</span><span class="n">success</span><span class="p">:</span>
  <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;agent_data&quot;</span><span class="p">]:</span>

    <span class="n">note_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;b&gt;system_product_name:&lt;/b&gt; </span><span class="si">{0}</span>
<span class="s2">              &lt;/br&gt;&lt;b&gt;system_uuid:&lt;/b&gt; </span><span class="si">{1}</span>
<span class="s2">              &lt;/br&gt;&lt;b&gt;system_manufacturer:&lt;/b&gt; </span><span class="si">{2}</span>
<span class="s2">              &lt;/br&gt;&lt;b&gt;release:&lt;/b&gt; </span><span class="si">{3}</span>
<span class="s2">              &lt;/br&gt;&lt;b&gt;machine:&lt;/b&gt; </span><span class="si">{4}</span>
<span class="s2">              &lt;/br&gt;&lt;b&gt;version:&lt;/b&gt; </span><span class="si">{5}</span><span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;hardware_info&quot;</span><span class="p">][</span><span class="s2">&quot;system_product_name&quot;</span><span class="p">],</span>
                                            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;hardware_info&quot;</span><span class="p">][</span><span class="s2">&quot;system_uuid&quot;</span><span class="p">],</span>
                                            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;hardware_info&quot;</span><span class="p">][</span><span class="s2">&quot;system_manufacturer&quot;</span><span class="p">],</span>
                                            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;os_info&quot;</span><span class="p">][</span><span class="s2">&quot;release&quot;</span><span class="p">],</span>
                                            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;os_info&quot;</span><span class="p">][</span><span class="s2">&quot;machine&quot;</span><span class="p">],</span>
                                            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;os_info&quot;</span><span class="p">][</span><span class="s2">&quot;version&quot;</span><span class="p">])</span>
    <span class="n">incident</span><span class="o">.</span><span class="n">addNote</span><span class="p">(</span><span class="n">helper</span><span class="o">.</span><span class="n">createRichText</span><span class="p">(</span><span class="n">note_text</span><span class="p">))</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">note_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> system not found in GRR&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">search_value</span><span class="p">)</span>
  <span class="n">incident</span><span class="o">.</span><span class="n">addNote</span><span class="p">(</span><span class="n">helper</span><span class="o">.</span><span class="n">createPlainText</span><span class="p">(</span><span class="n">note_text</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>Click <strong>Save &amp; Close</strong></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-22-add-new-grr-rule-in-resilient-ui">
<h2>Step 22: <em>Add New GRR Rule in Resilient UI</em><a class="headerlink" href="#step-22-add-new-grr-rule-in-resilient-ui" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Go to the <strong>Rules Tab</strong></p></li>
<li><p>Click <strong>New Rule</strong> and create a new <strong>Menu Item Rule:</strong></p>
<ul class="simple">
<li><p>Display Name: <code class="docutils literal notranslate"><span class="pre">GRR</span> <span class="pre">Search</span> <span class="pre">by</span> <span class="pre">IP</span></code></p></li>
<li><p>Object Type: <code class="docutils literal notranslate"><span class="pre">Artifact</span></code></p></li>
<li><p>Workflows: <code class="docutils literal notranslate"><span class="pre">Example:</span> <span class="pre">GRR</span> <span class="pre">Search</span> <span class="pre">by</span> <span class="pre">IP</span></code></p></li>
</ul>
<blockquote>
<div><p><strong>NOTE:</strong> This could be an <code class="docutils literal notranslate"><span class="pre">Automatic</span> <span class="pre">Rule</span></code> too, however for testing we will use a <code class="docutils literal notranslate"><span class="pre">Menu</span> <span class="pre">Item</span> <span class="pre">Rule</span></code></p>
</div></blockquote>
<p><img alt="screenshot" src="../_images/441.png" /></p>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="step-23-add-python-code-for-grr-function">
<h2>Step 23: <em>Add Python Code for GRR Function</em><a class="headerlink" href="#step-23-add-python-code-for-grr-function" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Firstly we need to export our <strong>Resilient UI Customizations</strong> we just created</p></li>
<li><p>In the <strong>Resilient UI</strong> go to Administrator Settings &gt; Organization &gt; Export and click <strong>Export</strong>
<img alt="screenshot" src="../_images/641.png" /></p></li>
<li><p>Save the file to your <strong>Downloads Directory</strong></p></li>
<li><p>Open <strong>Terminal</strong></p></li>
<li><p>Change directory to your <strong>components directory</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /home/resadmin/.resilient/components
</pre></div>
</div>
</li>
<li><p>Generate the resilient code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits codegen -f grr_search
</pre></div>
</div>
<blockquote>
<div><p><strong>NOTE:</strong> if you see this error:
<img alt="screenshot" src="../_images/451.png" />
You forgot to <strong>Export</strong> from the Resilient UI. You will need to Export and then run the <code class="docutils literal notranslate"><span class="pre">codegen</span></code> command again.</p>
</div></blockquote>
</li>
<li><p>Open the file in <strong>VS Code:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ code grr_search.py
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/46.png" /></p>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="step-24-develop-grr-script">
<h2>Step 24: <em>Develop GRR Script</em><a class="headerlink" href="#step-24-develop-grr-script" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Whilst we can develop a function in place, its often <strong>easier to develop as a Python Script</strong> then integrate that script into a <strong>Resilient Function</strong>. This means testing is quicker and if we already have an example script its quicker to get started.</p></li>
<li><p>Look at the <strong>documentation</strong> for GRR</p>
<ul class="simple">
<li><p>There is a Python API Client: https://github.com/google/grr/tree/master/api_client/python</p></li>
</ul>
</li>
<li><p>Follow the installation instructions to <strong>install the API Client</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install grr-api-client 
$ pip install future
</pre></div>
</div>
</li>
<li><p>Create a new file in the VSCode. Call it <strong>grr_test.py</strong> and save it in the home directory
<img alt="screenshot" src="../_images/65.png" /></p></li>
<li><p>First we need to <strong>import the GRR Library</strong>, then need to <strong>define our connection params</strong>. Then using the docs we can see we need to <strong>create a <code class="docutils literal notranslate"><span class="pre">grrapi</span> <span class="pre">object</span></code></strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">grr_api_client</span> <span class="kn">import</span> <span class="n">api</span>

<span class="n">grr_server</span><span class="o">=</span><span class="s2">&quot;http://localhost:8000&quot;</span>
<span class="n">grr_user</span><span class="o">=</span><span class="s2">&quot;admin&quot;</span>
<span class="n">grr_pwd</span><span class="o">=</span><span class="s2">&quot;resilient&quot;</span>
<span class="n">verify_cert</span><span class="o">=</span><span class="kc">False</span>

<span class="n">grrapi</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">InitHttp</span><span class="p">(</span><span class="n">api_endpoint</span><span class="o">=</span><span class="n">grr_server</span><span class="p">,</span>
                      <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="n">grr_user</span><span class="p">,</span> <span class="n">grr_pwd</span><span class="p">),</span><span class="n">verify</span><span class="o">=</span><span class="n">verify_cert</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Again, using the documentation, <strong>create a search:</strong></p>
<ul class="simple">
<li><p>The format is <code class="docutils literal notranslate"><span class="pre">SearchClients(ip:10.10.10.10)</span></code></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grr_search_value</span> <span class="o">=</span> <span class="s2">&quot;127.0.0.1&quot;</span>
<span class="n">grr_search_type</span> <span class="o">=</span> <span class="s2">&quot;ip&quot;</span>
<span class="n">search_result</span> <span class="o">=</span> <span class="n">grrapi</span><span class="o">.</span><span class="n">SearchClients</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">grr_search_type</span><span class="p">,</span><span class="n">grr_search_value</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>Now add in a <strong>for loop</strong> to print the results:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">client</span> <span class="ow">in</span> <span class="n">search_result</span><span class="p">:</span>
  <span class="nb">print</span> <span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">client_id</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Code should look like:
<img alt="screenshot" src="../_images/47.png" /></p></li>
<li><p>Now run the script. You can do this within <strong>VS Code</strong></p>
<ul class="simple">
<li><p>Right-Click the file and click <strong>run python file in terminal:</strong>
<img alt="screenshot" src="../_images/66.png" /></p></li>
</ul>
</li>
<li><p>Check the output. If you see a print out of the <strong>client_id</strong> then the script ran successfully:
<img alt="screenshot" src="../_images/49.png" /></p></li>
<li><p>The <strong>test script</strong> is complete</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-25-convert-the-test-script-into-a-resilient-function">
<h2>Step 25: <em>Convert the Test Script into a Resilient Function</em><a class="headerlink" href="#step-25-convert-the-test-script-into-a-resilient-function" title="Link to this heading">¶</a></h2>
<ul>
<li><p><strong>Highlight and copy</strong> all of your test script</p></li>
<li><p>Open <strong>grr_search.py</strong> and paste the test script overwriting the <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">PUT</span> <span class="pre">YOUR</span> <span class="pre">FUNCTION</span> <span class="pre">IMPLEMENTATION</span> <span class="pre">CODE</span> <span class="pre">HERE</span></code> on <strong>line 24</strong>
<img alt="screenshot" src="../_images/67.png" /></p></li>
<li><p>Ensure the code’s <strong>indentation is correct</strong> using tab</p></li>
<li><p>We need to tidy some things up:</p>
<ol class="arabic simple">
<li><p>Move the import to the top of the file</p></li>
<li><p>Remove the <strong>grr_search_value</strong> and <strong>search_type</strong> as these are already declared at the top as inputs to the function</p></li>
<li><p>Use <strong>StatusMessage</strong> instead of print statements</p></li>
</ol>
<ul class="simple">
<li><p>StatusMessages inform the user in the Resilient UI</p></li>
</ul>
<ol class="arabic simple" start="4">
<li><p>Create the <strong>results</strong> dictionary by looping the <strong>search_results</strong> and generating the data to return to the appliance</p></li>
</ol>
</li>
<li><p>Here is all the code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1"># pragma pylint: disable=unused-argument, no-self-use</span>
<span class="sd">&quot;&quot;&quot;Function implementation&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">resilient_circuits</span> <span class="kn">import</span> <span class="n">ResilientComponent</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">StatusMessage</span><span class="p">,</span> <span class="n">FunctionResult</span><span class="p">,</span> <span class="n">FunctionError</span>
<span class="kn">from</span> <span class="nn">grr_api_client</span> <span class="kn">import</span> <span class="n">api</span>

<span class="k">class</span> <span class="nc">FunctionComponent</span><span class="p">(</span><span class="n">ResilientComponent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Component that implements Resilient function(s)&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">opts</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;constructor provides access to the configuration options&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FunctionComponent</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">opts</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">opts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;fn_grr&quot;</span><span class="p">,</span> <span class="p">{})</span>

    <span class="nd">@function</span><span class="p">(</span><span class="s2">&quot;grr_search&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_grr_search_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Function: A function to search for GRR Agent&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Get the function parameters:</span>
            <span class="n">grr_search_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_select_param</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;grr_search_type&quot;</span><span class="p">))</span>  <span class="c1"># select, values: &quot;ip&quot;, &quot;user&quot;, &quot;host&quot;</span>
            <span class="n">grr_search_value</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;grr_search_value&quot;</span><span class="p">)</span>  <span class="c1"># text</span>

            <span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;grr_search_type: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">grr_search_type</span><span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;grr_search_value: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">grr_search_value</span><span class="p">)</span>

            <span class="c1"># Set the connection parameters</span>
            <span class="n">grr_server</span><span class="o">=</span><span class="s2">&quot;http://localhost:8000&quot;</span>
            <span class="n">grr_user</span><span class="o">=</span><span class="s2">&quot;admin&quot;</span>
            <span class="n">grr_pwd</span><span class="o">=</span><span class="s2">&quot;resilient&quot;</span>
            <span class="n">verify_cert</span><span class="o">=</span><span class="kc">False</span>

            <span class="c1"># Setup the connection</span>
            <span class="n">grrapi</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">InitHttp</span><span class="p">(</span><span class="n">api_endpoint</span><span class="o">=</span><span class="n">grr_server</span><span class="p">,</span>
                                <span class="n">auth</span><span class="o">=</span><span class="p">(</span><span class="n">grr_user</span><span class="p">,</span> <span class="n">grr_pwd</span><span class="p">),</span><span class="n">verify</span><span class="o">=</span><span class="n">verify_cert</span><span class="p">)</span>

            <span class="c1"># Inform the user</span>
            <span class="k">yield</span> <span class="n">StatusMessage</span><span class="p">(</span><span class="s2">&quot;Starting search for </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">grr_search_value</span><span class="p">))</span>

            <span class="c1"># Search the clients</span>
            <span class="c1"># Search Format: &quot;ip:127.0.0.1&quot;</span>
            <span class="n">search_result</span> <span class="o">=</span> <span class="n">grrapi</span><span class="o">.</span><span class="n">SearchClients</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">grr_search_type</span><span class="p">,</span><span class="n">grr_search_value</span><span class="p">))</span>

            <span class="n">agent_data</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">success</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="c1"># Set success to False if no agents found</span>
            <span class="k">if</span> <span class="n">search_result</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">success</span> <span class="o">=</span> <span class="kc">False</span>
          
          <span class="c1"># Loop the results and append some info the the agent_data list</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">agent</span> <span class="ow">in</span> <span class="n">search_result</span><span class="p">:</span>

                    <span class="n">hardware_info</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;system_manufacturer&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">agent</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">hardware_info</span><span class="o">.</span><span class="n">system_manufacturer</span><span class="p">),</span>
                        <span class="s2">&quot;system_product_name&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">agent</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">hardware_info</span><span class="o">.</span><span class="n">system_product_name</span><span class="p">),</span>
                        <span class="s2">&quot;system_uuid&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">agent</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">hardware_info</span><span class="o">.</span><span class="n">system_uuid</span><span class="p">)</span>
                    <span class="p">}</span>

                    <span class="n">os_info</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;release&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">agent</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">os_info</span><span class="o">.</span><span class="n">release</span><span class="p">),</span>
                        <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">agent</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">os_info</span><span class="o">.</span><span class="n">version</span><span class="p">),</span>
                        <span class="s2">&quot;machine&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">agent</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">os_info</span><span class="o">.</span><span class="n">machine</span><span class="p">)</span>
                    <span class="p">}</span>

                    <span class="n">entry</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;agent_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">agent</span><span class="o">.</span><span class="n">client_id</span><span class="p">),</span>
                        <span class="s2">&quot;hardware_info&quot;</span><span class="p">:</span> <span class="n">hardware_info</span><span class="p">,</span>
                        <span class="s2">&quot;os_info&quot;</span><span class="p">:</span> <span class="n">os_info</span>
                    <span class="p">}</span>
                    <span class="n">agent_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>

            <span class="c1"># Create the results dictionary</span>
            <span class="n">results</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;success&quot;</span><span class="p">:</span> <span class="n">success</span><span class="p">,</span>
                <span class="s2">&quot;grr_search_value&quot;</span><span class="p">:</span> <span class="n">grr_search_value</span><span class="p">,</span>
                <span class="s2">&quot;grr_search_type&quot;</span><span class="p">:</span> <span class="n">grr_search_type</span><span class="p">,</span>
                <span class="s2">&quot;agent_data&quot;</span><span class="p">:</span> <span class="n">agent_data</span>
            <span class="p">}</span>

            <span class="c1"># Some logging</span>
            <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Sending results to Resilient Appliance&quot;</span><span class="p">)</span>
            <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">StatusMessage</span><span class="p">(</span><span class="s2">&quot;Complete&quot;</span><span class="p">)</span>

            <span class="c1"># Send the results to the appliance</span>
            <span class="k">yield</span> <span class="n">FunctionResult</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">FunctionError</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p><strong>Save</strong> the file</p></li>
<li><p>Open <strong>Terminal</strong></p></li>
<li><p>Start <strong>resilient-circuits</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits run
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/68.png" /></p>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="step-26-run-our-new-custom-workflow">
<h2>Step 26: <em>Run our new Custom Workflow</em><a class="headerlink" href="#step-26-run-our-new-custom-workflow" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Add an <strong>Artifact</strong> to you test Incident</p>
<ul>
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">IP</span> <span class="pre">Address</span></code></p></li>
<li><p>Value: <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code></p></li>
</ul>
</li>
<li><p>Click the <strong>Take Action Button</strong> and run the <strong>GRR Search by IP</strong> Workflow on that Artifact:
<img alt="screenshot" src="../_images/69.png" /></p></li>
<li><p>Check the <strong>Notes Tab</strong> to see the results:
<img alt="screenshot" src="../_images/70.png" /></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-27-store-credentials-in-app-config-file">
<h2>Step 27: <em>Store Credentials in app.config file</em><a class="headerlink" href="#step-27-store-credentials-in-app-config-file" title="Link to this heading">¶</a></h2>
<ul>
<li><p>Open <code class="docutils literal notranslate"><span class="pre">/home/resadmin/.resilient/app.config</span></code> in <strong>VS Code</strong></p></li>
<li><p>Append these settings to the end of the file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">fn_grr</span><span class="p">]</span>
<span class="n">grr_server</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">8000</span>
<span class="n">grr_user</span><span class="o">=</span><span class="n">admin</span>
<span class="n">grr_pwd</span><span class="o">=</span><span class="n">resilient</span>
<span class="n">verify_cert</span><span class="o">=</span><span class="kc">False</span>
</pre></div>
</div>
</li>
<li><p>Update the function code to read from the <code class="docutils literal notranslate"><span class="pre">app.config</span></code> file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the connection parameters</span>
<span class="n">grr_server</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;grr_server&quot;</span><span class="p">]</span>
<span class="n">grr_user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;grr_user&quot;</span><span class="p">]</span>
<span class="n">grr_pwd</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;grr_pwd&quot;</span><span class="p">]</span>
<span class="n">verify_cert</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;verify_cert&quot;</span><span class="p">]</span>
</pre></div>
</div>
</li>
<li><p><strong>Stop</strong> <code class="docutils literal notranslate"><span class="pre">resilient-circuits</span></code> by pressing <strong>CTRL+C</strong></p></li>
<li><p><strong>Start</strong> resilient-circuits:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits run
</pre></div>
</div>
</li>
<li><p><strong>Run &amp; Test</strong> the Workflow again</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="step-28-package-your-message-destination-function-workflow-and-rule">
<h2>Step 28: <em>Package your Message Destination, Function, Workflow and Rule</em><a class="headerlink" href="#step-28-package-your-message-destination-function-workflow-and-rule" title="Link to this heading">¶</a></h2>
<ul>
<li><p>In the <strong>Resilient UI</strong> go to Administrator Settings &gt; Organization &gt; Export and click <strong>Export</strong>
<img alt="screenshot" src="../_images/641.png" /></p></li>
<li><p>Save the file to your <strong>Downloads Directory</strong></p></li>
<li><p>Open <strong>Terminal</strong></p></li>
<li><p><strong>Stop</strong> <code class="docutils literal notranslate"><span class="pre">resilient-circuits</span></code> by pressing <strong>CTRL+C</strong></p></li>
<li><p>Change Directory to your <strong>Desktop</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /home/resadmin/Desktop
</pre></div>
</div>
</li>
<li><p>Generate the <strong>Resilient Function Package:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits codegen -p fn_grr -m fn_grr --rule &quot;GRR Search by IP&quot;
</pre></div>
</div>
</li>
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">fn_grr</span></code> directory in <strong>VS Code:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ code fn_grr/
</pre></div>
</div>
</li>
<li><p>Replace the generated function code with our previously created function:</p>
<ul class="simple">
<li><p>Open <code class="docutils literal notranslate"><span class="pre">~/.resilient/components/grr_search.py</span></code> in <strong>VS Code</strong></p></li>
<li><p>Select all and <strong>copy</strong></p></li>
<li><p>Open <code class="docutils literal notranslate"><span class="pre">~/Desktop/fn_grr/components/grr_search.py</span></code></p></li>
<li><p>Select all and <strong>paste</strong></p></li>
<li><p><strong>Save</strong> the file</p></li>
</ul>
</li>
<li><p>Add <strong>package dependencies</strong> to <code class="docutils literal notranslate"><span class="pre">fn_grr/setup.py</span></code>:
<img alt="screenshot" src="../_images/721.png" /></p></li>
<li><p>Also update your <strong>name</strong>, <strong>email</strong> and <strong>license type</strong> in the <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> file:
<img alt="screenshot" src="../_images/74.png" /></p></li>
<li><p>Add <strong>default app.config settings</strong> to <code class="docutils literal notranslate"><span class="pre">fn_grr/util/config.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>

<span class="sd">&quot;&quot;&quot;Generate a default configuration-file section for fn_grr&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>


<span class="k">def</span> <span class="nf">config_section_data</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Produce the default configuration section for app.config,</span>
<span class="sd">      when called by `resilient-circuits config [-c|-u]`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config_data</span> <span class="o">=</span> <span class="sa">u</span><span class="s2">&quot;&quot;&quot;[fn_grr]</span>
<span class="s2">grr_server=127.0.0.1</span>
<span class="s2">grr_user=user</span>
<span class="s2">grr_pwd=password</span>
<span class="s2">#Can be True/False</span>
<span class="s2">verify_cert=False</span>
<span class="s2">&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">config_data</span>
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/731.png" /></p>
</li>
<li><p><strong>Comment out (#)</strong> the <code class="docutils literal notranslate"><span class="pre">componentsdir</span></code> in your <code class="docutils literal notranslate"><span class="pre">app.config</span></code> file and <strong>Save</strong> it</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#componentsdir=/home/resadmin/.resilient/components</span>
</pre></div>
</div>
<blockquote>
<div><p><strong>NOTE:</strong> We do this so any functions in that directory do not get loaded anymore</p>
</div></blockquote>
</li>
<li><p>Open <strong>Terminal</strong></p></li>
<li><p>Change Directory into the <strong>fn_grr</strong> directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd /home/resadmin/Desktop/fn_grr
</pre></div>
</div>
</li>
<li><p><strong>Package</strong> the Resilient Function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> $ python setup.py sdist
</pre></div>
</div>
</li>
<li><p><strong>Install</strong> the package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install dist/fn_grr-1.0.0.tar.gz 
</pre></div>
</div>
<blockquote>
<div><p><strong>NOTE:</strong> We can check the package was installed by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits list
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><strong>Start</strong> resilient-circuits:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits run
</pre></div>
</div>
</li>
<li><p><strong>Run the Workflow</strong> again on the Artifact and test all works ok</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="optional-step-29-share-packages-amongst-organizations-resilient-instances">
<h2>[Optional] Step 29: <em>Share Packages amongst Organizations/Resilient Instances</em><a class="headerlink" href="#optional-step-29-share-packages-amongst-organizations-resilient-instances" title="Link to this heading">¶</a></h2>
<section id="this-is-useful-for-developing-and-testing-your-workflows-in-one-org-instance-then-transferring-it-to-another-production-instance">
<h3><em>This is useful for developing and testing your Workflows in one org/instance, then transferring it to another/production instance</em><a class="headerlink" href="#this-is-useful-for-developing-and-testing-your-workflows-in-one-org-instance-then-transferring-it-to-another-production-instance" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Create another user in a new organization</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo resutil newuser -createorg -org &quot;New Org&quot; -email &quot;testuser@example.com&quot; -first &quot;Test&quot; -last &quot;User&quot; -password &quot;ResDemo123&quot;
</pre></div>
</div>
</li>
<li><p><strong>Login</strong> to Resilient UI using that user</p></li>
<li><p>Go to Customization Settings &gt; Workflows</p></li>
<li><p>Note it is <strong>blank</strong></p></li>
<li><p>Open your <code class="docutils literal notranslate"><span class="pre">app.config</span></code> file</p></li>
<li><p>Change <strong>email</strong> to: <code class="docutils literal notranslate"><span class="pre">testuser&#64;example.com</span></code> and <strong>org</strong> to <code class="docutils literal notranslate"><span class="pre">New</span> <span class="pre">Org</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">resilient</span><span class="p">]</span>
<span class="n">host</span><span class="o">=</span><span class="n">localhost</span>
<span class="n">port</span><span class="o">=</span><span class="mi">443</span>
<span class="n">email</span><span class="o">=</span><span class="n">testuser</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span>
<span class="n">password</span><span class="o">=</span><span class="n">ResDemo123</span>
<span class="n">org</span><span class="o">=</span><span class="n">New</span> <span class="n">Org</span>
<span class="c1">#componentsdir=/home/resadmin/.resilient/components</span>
<span class="n">logdir</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">resadmin</span><span class="o">/.</span><span class="n">resilient</span>
<span class="n">logfile</span><span class="o">=</span><span class="n">app</span><span class="o">.</span><span class="n">log</span>
<span class="n">loglevel</span><span class="o">=</span><span class="n">INFO</span>
<span class="n">cafile</span><span class="o">=</span><span class="n">false</span>
</pre></div>
</div>
</li>
<li><p>Open <strong>Terminal</strong></p></li>
<li><p>Ensure the GRR Function is installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits list
</pre></div>
</div>
</li>
<li><p><strong>Import the customizations</strong> into this New Org:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits customize
</pre></div>
</div>
</li>
<li><p>Press <strong>Y</strong> twice to agree to import the customizations</p></li>
<li><p><strong>Start</strong> Resilient Circuits:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ resilient-circuits run
</pre></div>
</div>
</li>
<li><p>Go back into the <strong>Resilient UI</strong> and refresh the <strong>Workflows Tab</strong>. You will see the GRR Workflow</p></li>
<li><p>Now test it. Create an <strong>Incident</strong> with an <strong>Artifact</strong>:</p>
<ul class="simple">
<li><p>Type: <code class="docutils literal notranslate"><span class="pre">IP</span> <span class="pre">Address</span></code></p></li>
<li><p>Value: <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code></p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="optional-step-30-setup-vs-code-to-debug-resilient-functions">
<h2>[Optional] Step 30: <em>Setup VS Code to Debug Resilient Functions</em><a class="headerlink" href="#optional-step-30-setup-vs-code-to-debug-resilient-functions" title="Link to this heading">¶</a></h2>
<ul>
<li><p><strong>Stop</strong> <code class="docutils literal notranslate"><span class="pre">resilient-circuits</span></code> by pressing <strong>CTRL+C</strong></p></li>
<li><p>You need to find the location of where <strong>resilient-circuits</strong> is installed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip show resilient-circuits
</pre></div>
</div>
<p><img alt="screenshot" src="../_images/75.png" /></p>
</li>
<li><p><strong>Copy</strong> the location and open <strong>VS Code</strong></p></li>
<li><p>On the left-hand side, click the <strong>Debug</strong> icon:
<img alt="screenshot" src="../_images/76.png" /></p></li>
<li><p>Click the dropdown and click <strong>Add Configuration:</strong>
<img alt="screenshot" src="../_images/77.png" /></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">launch.json</span></code> file opens</p></li>
<li><p>Duplicate the first configuration and rename it to: <strong>Resilient-Circuits</strong></p></li>
<li><p>Set the program variable to the <strong>location of resilient-circuits</strong> on your machine</p>
<blockquote>
<div><p><strong>Note:</strong> you should append <strong>resilient_circuits/app.py</strong> to the result you got from <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">show</span> <span class="pre">resilient-circuits</span></code> above</p>
</div></blockquote>
<p><img alt="screenshot" src="../_images/78.png" /></p>
</li>
<li><p>Open <code class="docutils literal notranslate"><span class="pre">grr_search.py</span></code> in <strong>VS Code</strong> and add a <strong>breakpoint</strong> to line 87: <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">StatusMessage(&quot;Complete&quot;)</span></code>:
<img alt="screenshot" src="../_images/79.png" /></p>
<blockquote>
<div><p><strong>Note:</strong> to add a <strong>breakpoint</strong> click the space to the left of the line number</p>
</div></blockquote>
</li>
<li><p>Run resilient-circuits by pressing the <strong>green play button</strong>:
<img alt="screenshot" src="../_images/80.png" /></p></li>
<li><p>You will see resilient-circuits start in your Terminal within VS Code:
<img alt="screenshot" src="../_images/811.png" /></p></li>
<li><p>Now, back to the <strong>Resilient UI</strong> and run the Workflow again</p></li>
<li><p>Wait for the <strong>debugger to stop at the breakpoint</strong></p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Technical Workshop Guide: <em>resilient-circuits</em></a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reference">Reference</a><ul>
<li><a class="reference internal" href="#step-1-check-which-python-version-is-installed">Step 1: <em>Check which Python Version is installed</em></a></li>
<li><a class="reference internal" href="#step-2-make-sure-resilient-license-is-valid">Step 2: <em>Make sure Resilient License is Valid</em></a></li>
<li><a class="reference internal" href="#step-3-install-resilient-circuits">Step 3: <em>Install Resilient Circuits</em></a></li>
<li><a class="reference internal" href="#step-4-configure-resilient-circuits">Step 4: <em>Configure Resilient Circuits</em></a><ul>
<li><a class="reference internal" href="#resilient-circuits-configurations-are-maintained-in-the-app-config-file"><em>Resilient Circuits configurations are maintained in the app.config file</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#step-5-create-user-accounts">Step 5: <em>Create User Accounts</em></a></li>
<li><a class="reference internal" href="#step-6-run-resilient-circuits">Step 6: <em>Run Resilient Circuits</em></a></li>
<li><a class="reference internal" href="#step-7-install-fn-utilities">Step 7: <em>Install FN Utilities</em></a></li>
<li><a class="reference internal" href="#step-8-testing-fn-utilities">Step 8: <em>Testing FN Utilities</em></a></li>
<li><a class="reference internal" href="#step-9-create-new-custom-workflow-that-uses-our-shell-command-function">Step 9: <em>Create new Custom Workflow that uses our Shell Command Function</em></a></li>
<li><a class="reference internal" href="#step-10-create-new-custom-rule-that-runs-our-workflow">Step 10: <em>Create new Custom Rule that runs our Workflow</em></a></li>
<li><a class="reference internal" href="#step-11-run-our-custom-workflow">Step 11: <em>Run our Custom Workflow</em></a></li>
<li><a class="reference internal" href="#step-12-start-docker">Step 12: <em>Start Docker</em></a></li>
<li><a class="reference internal" href="#step-13-ensure-openldap-is-configured-and-running">Step 13: <em>Ensure OpenLDAP is Configured and Running</em></a></li>
<li><a class="reference internal" href="#step-14-install-the-ldap-utilities-function">Step 14: <em>Install the LDAP Utilities Function</em></a></li>
<li><a class="reference internal" href="#step-15-configure-ldap-utilities">Step 15: <em>Configure LDAP Utilities</em></a></li>
<li><a class="reference internal" href="#step-16-run-ldap-search-function">Step 16: <em>Run LDAP Search Function</em></a></li>
<li><a class="reference internal" href="#step-17-view-ldap-search-results-in-resilient-ui">Step 17: <em>View LDAP Search Results in Resilient UI</em></a></li>
<li><a class="reference internal" href="#step-18-install-configure-the-cmdb-function">Step 18: <em>Install &amp; Configure the CMDB Function</em></a></li>
<li><a class="reference internal" href="#step-19-setup-grr">Step 19: <em>Setup GRR</em></a></li>
<li><a class="reference internal" href="#step-20-add-grr-message-destination-in-resilient-ui">Step 20: <em>Add GRR Message Destination in Resilient UI</em></a></li>
<li><a class="reference internal" href="#step-20-add-new-grr-function-in-resilient-ui">Step 20: <em>Add New GRR Function in Resilient UI</em></a></li>
<li><a class="reference internal" href="#step-21-add-new-grr-workflow-in-resilient-ui">Step 21: <em>Add New GRR Workflow in Resilient UI</em></a></li>
<li><a class="reference internal" href="#step-22-add-new-grr-rule-in-resilient-ui">Step 22: <em>Add New GRR Rule in Resilient UI</em></a></li>
<li><a class="reference internal" href="#step-23-add-python-code-for-grr-function">Step 23: <em>Add Python Code for GRR Function</em></a></li>
<li><a class="reference internal" href="#step-24-develop-grr-script">Step 24: <em>Develop GRR Script</em></a></li>
<li><a class="reference internal" href="#step-25-convert-the-test-script-into-a-resilient-function">Step 25: <em>Convert the Test Script into a Resilient Function</em></a></li>
<li><a class="reference internal" href="#step-26-run-our-new-custom-workflow">Step 26: <em>Run our new Custom Workflow</em></a></li>
<li><a class="reference internal" href="#step-27-store-credentials-in-app-config-file">Step 27: <em>Store Credentials in app.config file</em></a></li>
<li><a class="reference internal" href="#step-28-package-your-message-destination-function-workflow-and-rule">Step 28: <em>Package your Message Destination, Function, Workflow and Rule</em></a></li>
<li><a class="reference internal" href="#optional-step-29-share-packages-amongst-organizations-resilient-instances">[Optional] Step 29: <em>Share Packages amongst Organizations/Resilient Instances</em></a><ul>
<li><a class="reference internal" href="#this-is-useful-for-developing-and-testing-your-workflows-in-one-org-instance-then-transferring-it-to-another-production-instance"><em>This is useful for developing and testing your Workflows in one org/instance, then transferring it to another/production instance</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#optional-step-30-setup-vs-code-to-debug-resilient-functions">[Optional] Step 30: <em>Setup VS Code to Debug Resilient Functions</em></a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=4e2eecee"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../_static/js/custom.js?v=a365c389"></script>
    </body>
</html>