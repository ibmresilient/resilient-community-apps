<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v51.0.5.0.1475
-->

# Playbook - SNOW: Close Incident on Datatable Value Change (PB)

### API Name
`snow_close_on_datatable_value_change_incident_pb`

### Status
`disabled`

### Activation Type
`Automatic`

### Activation Conditions
`(sn_records_dt.sn_records_dt_snow_status contains Closed OR sn_records_dt.sn_records_dt_snow_status contains Resolved) AND sn_records_dt.sn_records_dt_type equals Incident `

### Object Type
`sn_records_dt`

### Description
Automatically closes the case/incident in SOAR when the status of the record in ServiceNow is changed to "Closed" or "Resolved."


---

## Local script - Close SOAR case on SNOW closure if row SN ID matches

### Description


### Script Type
`Local script`

### Object Type
`sn_records_dt`

### Script Content
```python
# only closes the case when the row with the same ID as the incident is closed
if str(row.sn_records_dt_sn_ref_id) == str(incident.properties.sn_snow_record_id):
  
  
  incident.plan_status = "C"
  incident.resolution_id = "Resolved"
  incident.resolution_summary = "Closed from ServiceNow automatically when ServiceNow status changed to " + str(row.sn_records_dt_snow_status.content)
  
  # NOTE: Make sure to also set any other required close fields that you may have in your SOAR system

```

---

