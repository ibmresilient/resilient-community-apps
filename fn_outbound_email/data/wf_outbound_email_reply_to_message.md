<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
-->

# Outbound Email Reply to Message

## Function - Outbound Email: Send Email 2

### API Name
`send_email2`

### Output Name
`outbound_email_results`

### Message Destination
`email_outbound`

### Pre-Processing Script
```python
import hashlib
import time

MESSAGE_ID_DOMAIN = "qradarsoar.ibm.com"

#inputs.mail_template_name="template_file"

if rule.properties.get('mail_message_id'):
  # generate a message-id
  seed_value = str(int(time.time()*1000))
  uuid_hash = hashlib.md5(seed_value.encode()).hexdigest()
  msg_id = "{}-{}-{}-{}-{}".format(uuid_hash[0:8], uuid_hash[8:12], uuid_hash[12:16], uuid_hash[16:20], uuid_hash[20:])
  inputs.mail_message_id = "{}@{}".format(msg_id, MESSAGE_ID_DOMAIN)

inputs.mail_attachments = rule.properties.mail_attachments
inputs.mail_body = rule.properties.mail_body.content if rule.properties.mail_body else None
inputs.mail_cc = rule.properties.mail_cc
inputs.mail_to = row['from']
inputs.mail_from = rule.properties.mail_from
inputs.mail_importance = rule.properties.mail_importance if rule.properties.mail_importance else None
inputs.mail_in_reply_to = row['message_id']
inputs.mail_incident_id = incident.id
inputs.mail_subject = "re: {}".format(row['subject'])
inputs.mail_template_label = rule.properties.mail_template_name
```

### Post-Processing Script
```python
None
```

---

