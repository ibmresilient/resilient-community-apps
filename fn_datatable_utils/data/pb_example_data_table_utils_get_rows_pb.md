<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v49.0.4423
-->

# Playbook - Example: Data Table Utils: Get Rows (PB)

### API Name
`example_data_table_utils_get_rows_pb`

### Status
`enabled`

### Activation Type
`manual`

### Object Type
`artifact`

### Description
An example Playbook showing how to use the Data Table Utils: Get Rows Function. It uses an Artifact value to search the Data Table and find rows containing that value and then deletes those rows from the Data Table. The results will be written in an Incident note.


---
## Function - Data Table Utils: Get Rows

### API Name
`dt_utils_get_rows`

### Output Name
`get_rows`

### Message Destination
`fn_datatable_utils`

### Function-Input Script
```python
# The ID of this incident
inputs.incident_id = incident.id

# The api name of the Data Table to update
inputs.dt_utils_datatable_api_name = "dt_utils_test_data_table"

# The number of max rows to return
if playbook.inputs.dt_utils_max_rows:
  inputs.dt_utils_max_rows = playbook.inputs.dt_utils_max_rows
else:
  inputs.dt_utils_max_rows = 0

# The direction of the sort
inputs.dt_utils_sort_direction = playbook.inputs.dt_utils_sort_direction

# The api name of the column to sort by
if playbook.inputs.dt_utils_sort_by:
  inputs.dt_utils_sort_by = playbook.inputs.dt_utils_sort_by
else:
  inputs.dt_utils_sort_by = None

# The column api name to search for
inputs.dt_utils_search_column = "dt_col_name"

# The cell value to search for
inputs.dt_utils_search_value = artifact.value
```

---

## Local script - Get Rows Post-Process Script

### Description


### Script Type
`Local script`

### Objet Type
`artifact`

### Script Content
```python
results = playbook.functions.results.get_rows
note_text = u"<b>Result from Example: Data Table Utils: Get Rows</b><br> search value: {}".format(results["inputs"]["dt_utils_search_value"])


if results["success"]:
  note_text = u"{} <br>{}".format(note_text, str(results.content["rows"]))
else:
  note_text = u"{} <br>No row found.".format(note_text)

incident.addNote(helper.createRichText(note_text))
```

---
