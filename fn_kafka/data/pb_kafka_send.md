<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v52.0.0.0.927
-->

# Playbook - Kafka: Send (PB)

### API Name
`kafka_send`

### Status
`enabled`

### Activation Type
`Manual`

### Activation Conditions
`-`

### Activation Form Elements
| Input Field Label | API Name | Element Type | Tooltip | Requirement |
| ----------------- | -------- | ------------ | ------- | ----------- |
| Broker Label | `kafka_broker_label` | text | Broker label defined in app.config | Always |
| Key | `kafka_key` | text | Optional key to pass with Kafka message | Optional |
| Message | `kafka_message` | textarea | Message to send, can be in JSON format | Always |
| Topic | `kafka_topic` | text | Kafka topic to send message to | Always |

### Object Type
`incident`

### Description
Send messages through Kafka based on a named topic


---
## Function - Kafka: Send

### API Name
`kafka_send`

### Output Name
`kafka_send_results`

### Message Destination
`fn_kafka`

### Function-Input Script
```python
inputs.kafka_broker_label = playbook.inputs.kafka_broker_label
inputs.kafka_topic = playbook.inputs.kafka_topic
inputs.kafka_key = playbook.inputs.kafka_key
inputs.kafka_message = playbook.inputs.kafka_message.get("content")
```

---

## Local script - Kafka: Write results to note

### Description
Write results of Kafka Send function to a note

### Script Type
`Local script`

### Object Type
`incident`

### Script Content
```python
results = playbook.functions.results.kafka_send_results

if not results.success:
    incident.addNote(f"<b>Kafka: Send (PB):</b> Unable to send message to broker {playbook.inputs.kafka_broker_label}.")
else:
  incident.addNote(f"<b>Kafka: Send (PB):</b> Sent message to broker {playbook.inputs.kafka_broker_label}: {playbook.inputs.kafka_message.get('content')}")
```

---

