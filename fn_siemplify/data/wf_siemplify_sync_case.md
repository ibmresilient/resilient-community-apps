<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
-->

# Siemplify Auto Sync Case

## Function - Siemplify Sync Case

### API Name
`siemplify_sync_case`

### Output Name
``

### Message Destination
`fn_siemplify`

### Pre-Processing Script
```python
inputs.siemplify_incident_id = incident.id
inputs.siemplify_assigned_user = None
inputs.siemplify_environment = None
inputs.siemplify_case_id = incident.properties.siemplify_case_id
inputs.siemplify_alert_id = incident.properties.siemplify_alert_id
```

### Post-Processing Script
```python
if results.success:
  incident.properties.siemplify_case_id = results.content.get('id')
  incident.properties.siemplify_case_link = helper.createRichText("<a target='blank' href='{}'>{}</a>".format(results.content.get('siemplify_case_url'), results.content.get('title')))
  incident.properties.siemplify_is_important = results.content.get('isImportant')
  incident.properties.siemplify_stage = results.content.get('stage')
  incident.properties.siemplify_assignee = results.content.get('assignedUserName')
  incident.properties.siemplify_priority = results.content.get('priority')
  incident.properties.siemplify_tags = ", ".join([tag['tag'] for tag in results.content.get('tags')])
  
  if results.content.get('alerts'):
    incident.properties.siemplify_alert_id = results.content['alerts'][0]['identifier']
  incident.addNote("Siemplify Sync Case {} created".format(results.content.get('id')))
else:
  incident.addNote("Siemplify Sync Case failed: {}".format(str(results.content)))
```

---

