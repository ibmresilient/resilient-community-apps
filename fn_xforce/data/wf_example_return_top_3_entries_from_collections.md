<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v48.2.4321
-->

# Example: X-Force Return Top 3 from Collection(s)

## Function - X-Force Utilities: Query Collection

### API Name
`xforce_query_collection`

### Output Name
`xforcecasefiles`

### Message Destination
`fn_xforce`

### Pre-Processing Script
```python
if artifact.value is not None:
  inputs.xforce_query = artifact.value
```

### Post-Processing Script
```python
if results.get("content", {}).get("num_of_casefiles") != 0:
  noteText = """<b>X-Force Query status</b><br>Total matched case files :<b>{0}</b><br>Now searching top 3 results""".format(results.get("content", {}).get("num_of_casefiles"))
  incident.addNote(helper.createRichText(noteText))
```

---

## Function - X-Force Utilities: Get Collection by ID

### API Name
`xforce_get_collection_by_id`

### Output Name
``

### Message Destination
`fn_xforce`

### Pre-Processing Script
```python
if workflow.properties.xforcecasefiles.get("content", {}).get("num_of_casefiles") > 0:
  inputs.xforce_collection_id = workflow.properties.xforcecasefiles.get("content", {}).get("casefiles", [])[0].get("caseFileID")
```

### Post-Processing Script
```python
if results.get("success"):
  content = results.get("content", {})
  noteText = """<br>Title :<b>{0}</b>
  <b>Created :</b>{1}</a>
  <b>Tags:</b> {2}</b>
  """.format(content.get("title"), content.get("created"), content.get("tags"))
  
  incident.addNote(helper.createRichText(f'{noteText}\n{results.get("wiki")}'))
  
  #We have access to an attribute in results called 'wiki'
  # As an enhancement you could save this 'wiki' to an attachment to have a HTML or TXT description of the threat
```

---

## Function - X-Force Utilities: Get Collection by ID

### API Name
`xforce_get_collection_by_id`

### Output Name
``

### Message Destination
`fn_xforce`

### Pre-Processing Script
```python
if workflow.properties.xforcecasefiles.get("content", {}).get("num_of_casefiles") >= 2:
  inputs.xforce_collection_id = workflow.properties.xforcecasefiles.get("content", {}).get("casefiles", [])[1].get("caseFileID")
```

### Post-Processing Script
```python
if results.get("success"):
  content = results.get("content", {})
  noteText = """<br>Title :<b>{0}</b>
  <b>Created :</b>{1}</a>
  <b>Tags:</b> {2}</b>
  """.format(content.get("title"), content.get("created"), content.get("tags"))
  
  incident.addNote(helper.createRichText(f'{noteText}\n{results.get("wiki")}'))
  
  #We have access to an attribute in results called 'wiki'
  # As an enhancement you could save this 'wiki' to an attachment to have a HTML or TXT description of the threat
```

---

## Function - X-Force Utilities: Get Collection by ID

### API Name
`xforce_get_collection_by_id`

### Output Name
`None`

### Message Destination
`fn_xforce`

### Pre-Processing Script
```python
if workflow.properties.xforcecasefiles.get("content", {}).get("num_of_casefiles") >= 3:
  inputs.xforce_collection_id = workflow.properties.xforcecasefiles.get("content", {}).get("casefiles", [])[2].get("caseFileID")
```

### Post-Processing Script
```python
if results.get("success"):
  content = results.get("content", {})
  noteText = """<br>Title :<b>{0}</b>
  <b>Created :</b>{1}</a>
  <b>Tags:</b> {2}</b>
  """.format(content.get("title"), content.get("created"), content.get("tags"))
  
  incident.addNote(helper.createRichText(f'{noteText}\n{results.get("wiki")}'))
  
  #We have access to an attribute in results called 'wiki'
  # As an enhancement you could save this 'wiki' to an attachment to have a HTML or TXT description of the threat
```

---

