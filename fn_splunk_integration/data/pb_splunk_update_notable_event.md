<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v50.1.262
-->

# Playbook - Splunk: Update notable event - Example (PB)

### API Name
`splunk_update_notable_event`

### Status
`enabled`

### Activation Type
`Manual`

### Activation Conditions
`-`

### Activation Form Elements
| Input Field Label | API Name | Element Type | Tooltip | Requirement |
| ----------------- | -------- | ------------ | ------- | ----------- |
| Splunk Server | `splunk_server` | text | Enter the label given to the Splunk server in the app.config you wish to use | Optional |

### Object Type
`incident`

### Description
This is an example playbook calling the "Splunk Update Notable Event" function to update a given notable event. The event_status is mapped to the plan_status of the incident, and the comment is set in the Pre-Process Script tab accordingly.


---
## Function - Splunk Update Notable Event

### API Name
`splunk_update_notable`

### Output Name
`update_event`

### Message Destination
`splunk_es_rest`

### Function-Input Script
```python
inputs.comment = "Updating information from SOAR"
if incident.properties.splunk_notable_event_id:
  inputs.event_id = incident.properties.splunk_notable_event_id
  if incident.plan_status == "C":
      inputs.notable_event_status = 5
      inputs.comment = "SOAR incident is closed"
  else:
      inputs.notable_event_status = 2
      inputs.comment = "SOAR incident is active"
  inputs.splunk_label = getattr(playbook.inputs, "splunk_server")
else:
  helper.fail("Ensure that the incident custom field is set: splunk_notable_event_id")
```

---

## Local script - post process

### Description


### Script Type
`Local script`

### Object Type
`incident`

### Script Content
```python
results = playbook.functions.results.update_event
results_content = results.get("content", {})

result_note = u"<b>Splunk Update notable event</b>:<br><br>"
if isinstance(results.get("content"), dict):
  result_note = result_note + u"""<b>Splunk Update Status</b>: {}<br>
<b>Message</b>: {}""".format("Successful" if results_content.get("success", False) else "Unsuccessful",
                             results_content.get("message", "None"))
else:
  result_note = result_note + results_content

incident.addNote(helper.createRichText(result_note))
```

---

