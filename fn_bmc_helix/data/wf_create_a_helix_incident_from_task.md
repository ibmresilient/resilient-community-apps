<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v49.0.4423
-->

# Create a Helix Incident from Task

## Function - Helix: Create Incident

### API Name
`helix_create_incident`

### Output Name
`None`

### Message Destination
`fn_bmc_helix`

### Pre-Processing Script
```python
# Python 2 compatibility for CP4S 1.6
def mk_str(value, quotes=u'"'):
  if value is None:
    return "null"
  else:
    esc_value = value.replace(u'"', u'\\"')
    if quotes:
      return u'{0}{1}{0}'.format(quotes, esc_value)
    else:
      return esc_value

payload = u"""{{ "ApplyTemplate": {},
  "First_Name": {},
  "Last_Name": {},
  "Impact": {},
  "Urgency": {},
  "Service_Type": {},
  "Status": {},
  "Reported Source": {},
  "Description": {},
  "Assigned Support Organization": {},
  "additional_data": {}
}}""".format(mk_str(rule.properties.helix_template),
  rule.properties.helix_first_name,
  mk_str(rule.properties.helix_last_name),
  mk_str(rule.properties.helix_impact),
  mk_str(rule.properties.helix_urgency),
  mk_str(rule.properties.helix_service_type),
  mk_str(rule.properties.helix_status),
  mk_str(rule.properties.helix_reported_source),
  mk_str(rule.properties.helix_note),
  mk_str(rule.properties.helix_support_group),
  rule.properties.helix_additional_data.content if rule.properties.helix_additional_data.content else "null"
)

# set inputs
inputs.task_id = task.id 
inputs.incident_id = incident.id
inputs.helix_incident_name = task.name
inputs.helix_payload = payload

```

### Post-Processing Script
```python
noteText = "<h5> Helix Create Incident</h5>"

task_id = task.id
task_name = task.name

if results["success"]:
  noteText += "<p>Successfully sent task {0} \"{1}\" to Helix as Incident Number {2} (UI name) and Request ID {3} (API name).</p>"\
  "".format(task_id, task_name, \
  results["content"]["values"]["Incident Number"], results["content"]["values"]["Request ID"])
else:
  noteText += "<p>Unable to send task {0} \"{1}\" to Helix</p>".format(task_id, task_name)
  noteText += "<p>Ensure the activity fields and payload you provide meet the minimum requirements in your system for incident creation and routing."

richText = helper.createRichText(noteText)
incident.addNote(richText)
```

---

