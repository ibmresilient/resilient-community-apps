<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
-->

# OCR: Parse Image (Base64)

## Function - OCR: Read Text From Image Bytes

### API Name
`fn_ocr`

### Output Name
`ocr_results`

### Message Destination
`fn_ocr`

### Pre-Processing Script
```python
inputs.ocr_incident_id = incident.id
# inputs.ocr_attachment_id = attachment.id if attachment.id else None
# inputs.ocr_artifact_id = artifact.id if artifact.id else None
inputs.ocr_task_id = task.id if task and task.id else None
inputs.ocr_confidence_threshold = rule.properties.ocr_confidence_threshold
inputs.ocr_language = rule.properties.ocr_language
inputs.ocr_base64 = rule.properties.ocr_base64
```

### Post-Processing Script
```python
content = workflow.properties.ocr_results["content"]

if content is not None:
  output_text = "Below are the lines detected by OCR, as well as their confidence scores (threshold >= {0})\n\n".format(workflow.properties.ocr_results.get("inputs", {}).get("ocr_confidence_threshold"))
  for line in content:
    output_text += '"' + line.get("text",None) + f'" \t\t <i>Confidence Score: {round(line.get("confidence",None),2)}%</i>\n\n'
  
  
  incident.addNote(output_text)
```

---

