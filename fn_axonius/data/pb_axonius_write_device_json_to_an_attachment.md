<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v51.0.1.0.695
-->

# Playbook - Axonius: Write Device JSON to an Attachment

### API Name
`axonius_write_device_json_to_an_attachment`

### Status
`enabled`

### Activation Type
`Manual`

### Activation Conditions
`-`

### Object Type
`axonius_devices_dt`

### Description
Write the JSON returned from Axonius device query to an attachment.


---
## Function - Axonius: Get Device By ID

### API Name
`axonius_get_device_by_id`

### Output Name
`get_device_results`

### Message Destination
`fn_axonius`

### Function-Input Script
```python
inputs.axonius_internal_axon_id = row.axonius_id
inputs.axonius_write_attachment = True
inputs.axonius_attachment_name = "Axonius-Device-{0}.json".format(row.axonius_name)
inputs.axonius_incident_id = incident.id
inputs.axonius_task_id = None
```

---

## Local script - Axonius: Write attachment creation results to a note

### Description
Write attachment creation results to a SOAR note.

### Script Type
`Local script`

### Object Type
`axonius_devices_dt`

### Script Content
```python
results = playbook.functions.results.get_device_results

inputs = results.get("inputs", None)
axonius_internal_axon_id = inputs.get("axonius_internal_axon_id", None)

if results.get("success", False):
  content = results.get("content", None)
  if content:
    attachment_name = content.get("attachment_name", None)
    note_text = f"<b>Axonius: Write Device JSON to Attachment:</b> wrote attachment: <b>{attachment_name}</b>."
  else:
    note_text = f"<b>Axonius: Write Device JSON to Attachment:</b> attachment was not written (no content) for {axonius_internal_axon_id}."
else:
    reason = results.get("reason", None)
    note_text = f"<b>Axonius: Write Device JSON to Attachment:</b> attachment was not written {reason}<br> for ID {axonius_internal_axon_id}."
    
incident.addNote(note_text)
```

---

