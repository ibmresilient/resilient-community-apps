<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
-->

# Schedule a Rule/Playbook to Run - Task

## Function - Scheduled Rule Create

### API Name
`create_a_scheduled_rule`

### Output Name
`None`

### Message Destination
`fn_scheduler`

### Pre-Processing Script
```python
inputs.scheduler_type = rule.properties.schedule_type
if rule.properties.schedule_type == 'date':
  # date format converted to use dashes
  inputs.scheduler_type_value = rule.properties.schedule_type_value.replace("/", "-")
else:
  inputs.scheduler_type_value = rule.properties.schedule_type_value

inputs.scheduler_rule_name = rule.properties.schedule_rule_name
inputs.scheduler_rule_parameters = rule.properties.schedule_rule_parameters

inputs.scheduler_label_prefix = rule.properties.schedule_label_prefix
inputs.incident_id = incident.id
inputs.object_id = task.id
inputs.scheduler_is_playbook = rule.properties.schedule_is_playbook
```

### Post-Processing Script
```python
import java.util.Date as Date

TYPE_LOOKUP = {0: 'Incident', 1: "Task", 4: "Artifact", 5: "Attachment"}

if results.success:
  job = results.content
  row = incident.addRow("scheduler_rules")
  row['reported_on'] = str(Date())
  row['schedule_label'] = job['id']
  row['schedule_type'] = job['type']
  row['incident_id'] = job['args'][0]
  row['schedule'] = job['value']
  row['status'] = 'Active'
  row['next_run_time'] = job['next_run_time']
  row['rule_type'] = TYPE_LOOKUP.get(job['args'][6], "Datatable")
  if job['args'][8]:
    row['rule'] = "<a href='#playbooks/designer/{}'>{}</a>".format(job['args'][5], job['args'][4])
  else:
    row['rule'] = "<a href='#customize?tab=actions&id={}'>{}</a>".format(job['args'][5], job['args'][4])
else:
  incident.addNote("Schedule a Rule/Playbook failed: {}".format(result.reason))
```

---

