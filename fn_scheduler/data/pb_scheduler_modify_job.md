<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v51.0.2.2.1096
-->

# Playbook - Scheduler: Modify Job (PB)

### API Name
`pb_scheduler_modify_job`

### Status
`enabled`

### Activation Type
`Manual`

### Activation Conditions
`scheduler_rules.schedule_label has_a_value AND scheduler_rules.status not_contains Deleted`

### Activation Form Elements
| Input Field Label | API Name | Element Type | Tooltip | Requirement |
| ----------------- | -------- | ------------ | ------- | ----------- |
| Schedule Rule Parameters | `schedule_rule_parameters` | text | field1=value;field2=value format of optional rule parameters | Optional |
| Schedule Type | `modify_schedule_type` | select | - | Optional |
| Schedule Type Value | `modify_schedule_type_value` | text | cron (* 5 * * *); date (yyyy-mm-dd hh:mm:ss) ; interval (10m) | Optional |

### Object Type
`scheduler_rules`

### Description
Modify existing jobs


---
## Function - Scheduled Rule Modify

### API Name
`scheduled_rule_modify`

### Output Name
`output_scheduled_rule_modify`

### Message Destination
`fn_scheduler`

### Function-Input Script
```python
inputs.scheduler_label = row['schedule_label']
inputs.modify_scheduler_type = getattr(playbook.inputs, "modify_schedule_type", None)
inputs.modify_scheduler_type_value = getattr(playbook.inputs, "modify_schedule_type_value", "cron")
inputs.scheduler_rule_parameters = getattr(playbook.inputs, "schedule_rule_parameters", None)

```

---

## Local script - Write modified job to DataTable

### Description
Updates the dataTable with the modified job

### Script Type
`Local script`

### Object Type
`scheduler_rules`

### Script Content
```python
from datetime import datetime

results = playbook.functions.results.output_scheduled_rule_modify
now = datetime.now().strftime("%Y-%m-%d %H:%M:%S") # '2023-03-24 11:28:34'

if not results.get("success"):
  incident.addNote("Modify Scheduled Rule/Playbook failed: {}".format(results.get("reason")))

else:
  job = results.get("content")
  row['reported_on'] = now
  row['schedule_type'] = job.get('type')
  row['schedule'] = job.get('value')
  incident.addNote("Modify Scheduled Rule/Playbook succeeded for: {}".format(job.get('id')))

```

---

