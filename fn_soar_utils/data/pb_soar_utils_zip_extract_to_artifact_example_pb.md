<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v51.0.5.0.1475
-->

# Playbook - SOAR Utils: Zip Extract to Artifact- Example (PB)

### API Name
`soar_utils_zip_extract_to_artifact_example_pb`

### Status
`enabled`

### Activation Type
`Manual`

### Activation Conditions
`attachment.name contains .zip`

### Activation Form Elements
| Input Field Label | API Name | Element Type | Tooltip | Requirement |
| ----------------- | -------- | ------------ | ------- | ----------- |
| Extract File Path | `soar_utils_extract_file_path` | text | Enter a file name inside the zip to extract. | Always |
| Zip Password | `soar_utils_zip_password` | text | - | Optional |

### Object Type
`attachment`

### Description
An example playbook showing how to extract a file from a ZIP file attachment and create a new artifact.


---
## Function - SOAR Utilities: Attachment Zip Extract

### API Name
`soar_utils_attachment_zip_extract`

### Output Name
`zip_extract_result`

### Message Destination
`fn_soar_utils`

### Function-Input Script
```python
# Required inputs are: the incident id and attachment id
inputs.incident_id = incident.id
inputs.attachment_id = attachment.id

# If this is a "task attachment" then we will additionally have a task-id
if task is not None:
  inputs.task_id = task.id

# The path within the zip that we want to extract
inputs.soar_utils_file_path = playbook.inputs.soar_utils_extract_file_path

# If the zipfile is password protected, specify here
# inputs.zipfile_password = 
if playbook.inputs.soar_utils_zip_password:
  inputs.soar_utils_zipfile_password = playbook.inputs.soar_utils_zip_password
```

---
## Function - SOAR Utilities: Base64 to Artifact

### API Name
`soar_utils_base64_to_artifact`

### Output Name
`zip_extract_to_artifact_result`

### Message Destination
`fn_soar_utils`

### Function-Input Script
```python
inputs.soar_utils_base64content = playbook.functions.results.zip_extract_result.content
file_name = playbook.inputs.soar_utils_extract_file_path.split('/')[-1]

inputs.incident_id = incident.id
inputs.soar_utils_file_name = file_name + ".b64"
inputs.soar_utils_content_type = "image/jpeg"
```

---

## Local script - Soar Utils: base64 to Artifact

### Description
Extract a file from a zip file and create Base64 encoded string as an Other File artifact

### Script Type
`Local script`

### Object Type
`attachment`

### Script Content
```python
results = playbook.functions.results.zip_extract_to_artifact_result
if results:
  note_text = f"<b> SOAR Utils: Zip Extract to Artifact - Example (PB) </b> File {results.get('value',None)} saved successfully in the artifact."
else:
  note_text = f"<b>SOAR Utils: Zip Extract to Artifact - Example (PB)</b> Failed: {results.reason}"

incident.addNote(note_text)

```

---

