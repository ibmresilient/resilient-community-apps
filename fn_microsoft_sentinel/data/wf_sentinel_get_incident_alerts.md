<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-circuits codegen
-->

# Sentinel Get Incident Alerts

## Function - Sentinel Get Incident Alerts

### API Name
`sentinel_get_incident_alerts`

### Output Name
`None`

### Message Destination
`fn_microsoft_sentinel`

### Pre-Processing Script
```python
inputs.sentinel_incident_id = incident.properties.sentinel_incident_number
inputs.sentinel_profile = incident.properties.sentinel_profile
```

### Post-Processing Script
```python
import datetime
import time

if results['success']:
  for alert in results['content']['value']:
    properties = alert.get('properties', {})
    row = incident.addRow("sentinel_incident_alerts")
    time_generated = properties['timeGenerated'][:properties['timeGenerated'].find('.')]
    dt = datetime.datetime.strptime(time_generated, '%Y-%m-%dT%H:%M:%S')
    row['report_date'] = int(time.time()*1000)
    row['alert_date'] = int(dt.strftime('%s'))*1000
    row['alert_name'] = properties.get('alertDisplayName')
    row['alert_description'] = properties.get('description')
    row['alert_type'] = properties.get('alertType')
    row['alert_status'] = properties.get('status')
    row['alert_severity'] = properties.get('severity')
    row['alert_confidence_level'] = properties.get('confidenceLevel')
    row['alert_tactics'] = ",".join(properties.get('tactics', []))
    row['alert_compromised_entity'] = properties.get('compromisedEntity')
    row['alert_remediation_steps'] = helper.createPlainText('\n'.join(properties.get('remediationSteps', [])))
    row['alert_id'] = properties.get('systemAlertId')
    if properties.get('alertLink'):
        row['alert_url'] = helper.createRichText("<a target='blank' href='{}'>Alert Link</a>".format(properties['alertLink']))

```

---

