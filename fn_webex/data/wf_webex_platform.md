<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
-->

# WebEx Platform

## Function - Create WebEx Meeting

### API Name
`fn_create_meeting`

### Output Name
`None`

### Message Destination
`fn_webex`

### Pre-Processing Script
```python
# To set meeting name to the workflow inputs, uncomment the following lines
inputs.webex_meeting_name = incident.name

inputs.webex_meeting_start_time = inputs.webex_meeting_start_time if not rule.properties.webex_meeting_start_time else rule.properties.webex_meeting_start_time
inputs.webex_meeting_end_time = inputs.webex_meeting_end_time if not rule.properties.webex_meeting_end_time else rule.properties.webex_meeting_end_time

# Get the agenda from the activity field or the incident description
if rule.properties.webex_meeting_agenda is None:
  if not incident.description and not incident.description.content:
    inputs.webex_meeting_agenda = incident.description.content
  else:
    inputs.webex_meeting_agenda = ""
else:
  inputs.webex_meeting_agenda = rule.properties.webex_meeting_agenda

inputs.webex_meeting_password = inputs.webex_meeting_password if not rule.properties.webex_meeting_password else rule.properties.webex_meeting_password
  
```

### Post-Processing Script
```python
content = results.get("content")

if not results.success:
  text = u"Unable to create Cisco WebEx Meeting"

  fail_reason = content.get("fail_reason")
  if fail_reason:
    text = u"{0}:\n\tFailure reason: {1}".format(text, fail_reason)
else:

  host_url = content.get("host_url")
  attendee_url = content.get("attendee_url")

  if not host_url:
    host_url = ""

  if not attendee_url:
    attendee_url = ""
    
  ref_html_host = u"""<a href='{0}'>Link</a>""".format(host_url)
  ref_html_attendee = u"""<a href='{0}'>Link</a>""".format(attendee_url)

  text = u"<b>Cisco WebEx Meeting Links:</b><br />Host URL: {0}<br />Attendee URL: {1}".format(ref_html_host, ref_html_attendee)
  for key in content:
      text += u"<br />{} : {}".format(key, content.get(key))
  
note = helper.createRichText(text)
incident.addNote(note)
```

---

