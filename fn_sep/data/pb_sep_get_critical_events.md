<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v51.0.2.2.1096
-->

# Playbook - SEP: Get Critical Events - Example (PB)

### API Name
`sep_get_critical_events`

### Status
`enabled`

### Activation Type
`Manual`

### Activation Conditions
`-`

### Object Type
`incident`

### Description
Gets information related to critical events.


---
## Function - SEP - Get Critical Events Info

### API Name
`sep_get_critical_events_info`

### Output Name
`get_critical_events_info_results`

### Message Destination
`fn_sep`

### Function-Input Script
```python
None
```

---

## Local script - get critical events info output

### Description


### Script Type
`Local script`

### Object Type
`incident`

### Script Content
```python
from time import time

now = int(time()*1000)
results = playbook.functions.results.get_critical_events_info_results

if not results.get("success"):
  incident.addNote(f"Symantec SEP - Get Critical Events failed: {results.reason}")
else:
  for event in results.get("content", {}).get("criticalEventsInfoList", []):
    row = incident.addRow("sep_critical_events")
    row['date_added'] = now
    row['event_id'] = event.get('eventId')
    row['event_date'] = event.get('eventDateTime')
    row['subject'] = event.get('subject')
    row['message'] = event.get('message')
    row['acknowledged'] = bool(event.get('acknowledged'))
```

---

