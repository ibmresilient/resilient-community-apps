# User Agent Analysis
User agent analysis allows for the data enrichment on user agent strings found in web and firewall logs. These entries can provide clues as to potential attempted malicious access and what follow on steps are needed to restrict access.

If you do not already have an account at WhatIsMyBrowser, you can complete those steps here: `https://developers.whatismybrowser.com/api/pricing/`.

Sample workflows and rules are provided demonstrating the execution of the function by placing the resulting payload into a note. 
Your use of the function may require parsing of the result json. Here's a sample result:

```
{
  "parse": {
    "user_agent": "\"user_agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36\"",
    "software_name": "Chrome",
    "operating_system": "Mac OS X (Mavericks)",
    "software_version": "64",
    "operating_system_name": "Mac OS X",
    "operating_system_version_full": [
      "10",
      "9",
      "5"
    ],
    "software_name_code": "chrome",
    "simple_operating_platform_string": null,
    "operating_system_version": "Mavericks",
    "simple_sub_description_string": null,
    "is_abusive": false,
    "operating_system_flavour_code": null,
    "software_version_full": [
      "64",
      "0",
      "3282",
      "140"
    ],
    "simple_software_string": "Chrome 64 on Mac OS X (Mavericks)",
    "operating_system_flavour": null,
    "operating_system_name_code": "mac-os-x",
    "software": "Chrome 64"
  },
  "result": {
    "message": "The user agent was parsed successfully.",
    "code": "success",
    "message_code": "user_agent_parsed"
  }
}
```

##Updates for config file 
```
[fn_useragentanalysis]
url=WHAT_IS_MY_BROWSER_API_URL
api_key=WHAT_IS_MY_BROWSER_API_KEY
```


##Installation
To install in "development mode"

    pip install -e ./fn_useragentanalysis/

After installation, the package will be loaded by `resilient-circuits run`.


To uninstall,

    pip uninstall fn_useragentanalysis


To package for distribution,

    python ./fn_useragentanalysis/setup.py sdist

The resulting .tar.gz file can be installed using

    pip install fn_useragentanalysis-<version>.tar.gz
    
##Reference
This template project was generated by

    resilient-circuits codegen -p fn_useragentanalysis [-f fn_useragentanalysis] [-w user_agent_workflow] [--rule "Example: User Agent Analysis"]



