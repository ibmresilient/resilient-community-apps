<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
-->

# Example ODBC SELECT PostgreSQL

## Function - fn_odbc_query

### API Name
`fn_odbc_query`

### Output Name
`None`

### Message Destination
`fn_odbc_query`

### Pre-Processing Script
```python
inputs.sql_condition_value1 = artifact.value
```

### Post-Processing Script
```python
##  ODBC query workflow - post processing script ##
# Example of expected results.
"""
{
  'entries': [
    {u'sql_column_1': "query_result_column_1_value, u'sql_column_2': u'query_result_column_2_value', ...},
    {u'sql_column_1': query_result_column_1_value, u'sql_column_2': u'query_result_column_2_value', ...}
    ...
  ]
}
"""
#  Globals

# This list contains Resilient data table api field names.
# Exclude fist two columns 'sql_artifact_value' and 'sql_timestamp' from this list.
# Modify this list acording to your Resilent data table fields.
RESILENT_DATATABLE_COLUMN_NAMES_LIST = [
  "sql_column_1",
  "sql_column_2",
  "sql_column_3",
  "sql_column_4",
  "sql_column_5"]

# Processing
from java.util import Date

if results.entries:
  for entry in results.entries:
    row = incident.addRow("sql_query_results_dt")

    row.sql_artifact_value = artifact.value
    row.sql_timestamp = Date()

    for item in RESILENT_DATATABLE_COLUMN_NAMES_LIST:
      if item in entry:
        try:
          row[item] = entry[item]
        except IndexError:
          row[item] = ""
```

---

