<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
-->

# Example ODBC SELECT PostgreSQL

## Function - fn_odbc_query

### API Name
`fn_odbc_query`

### Output Name
``

### Message Destination
`fn_odbc_query`

### Pre-Processing Script
```python
inputs.sql_condition_value1 = artifact.value
inputs.db_label = rule.properties.db_label
```

### Post-Processing Script
```python
# This list contains SOAR data table api field names.
# Exclude fist two columns 'sql_artifact_value' and 'sql_timestamp' from this list.
# Modify this list acording to your SOAR data table fields.
DATATABLE_COLUMN_NAMES_LIST = [
  "sql_column_1",
  "sql_column_2",
  "sql_column_3",
  "sql_column_4",
  "sql_column_5"]

# Processing
from java.util import Date

if results.get("content").get("entries"):
  for entry in results['content'].get("entries"):
    table = incident.addRow("sql_query_results_dt")
    table['sql_artifact_value'] = artifact.value
    table['sql_timestamp'] = Date()

    for item in DATATABLE_COLUMN_NAMES_LIST:
      if item in entry:
        try:
          table[item] = entry[item]
        except IndexError:
          table[item] = ""
```

---

