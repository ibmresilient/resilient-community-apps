<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v51.0.2.2.1096
-->

# Playbook - Sumo Logic: Update Insight Status

### API Name
`sumo_logic_update_insight_status`

### Status
`enabled`

### Activation Type
`Manual`

### Activation Conditions
`-`

### Activation Form Elements
| Input Field Label | API Name | Element Type | Tooltip | Requirement |
| ----------------- | -------- | ------------ | ------- | ----------- |
| Resolution | `sumo_logic_insight_resolution` | select | - | Optional |
| Status | `sumo_logic_insight_status` | select | - | Always |

### Object Type
`incident`

### Description
Manual playbook to update the status of an insight in Sumo Logic.


---
## Function - Sumo Logic: Update Insight Status

### API Name
`sumo_logic_update_insight_status`

### Output Name
`update_insight_status_results`

### Message Destination
`fn_sumo_logic`

### Function-Input Script
```python
inputs.sumo_logic_insight_id = incident.properties.sumo_logic_insight_id
inputs.sumo_logic_insight_status = playbook.inputs.sumo_logic_insight_status
inputs.sumo_logic_insight_resolution = playbook.inputs.sumo_logic_insight_resolution

if inputs.sumo_logic_insight_status == "Closed" and not playbook.inputs.sumo_logic_insight_resolution:
  helper.fail("Resolution musted be specified if status is Closed.")
```

---

## Local script - Sumo Logic: Write Update Insight Status results

### Description
Write results of Update Sumo Logic Status function results to a SOAR note. 

### Script Type
`Local script`

### Object Type
`incident`

### Script Content
```python
results = playbook.functions.results.update_insight_status_results

if results.get("success"):
    note_text = f"<b>Sumo Logic: Update Insight Status: </b> set:<br>"
    if playbook.inputs.sumo_logic_insight_status:
        incident.properties.sumo_logic_insight_status = playbook.inputs.sumo_logic_insight_status
        note_text = f"{note_text}<br>   Status:  {playbook.inputs.sumo_logic_insight_status}"
    if playbook.inputs.sumo_logic_insight_resolution and playbook.inputs.sumo_logic_insight_status == 'Closed':
        incident.properties.sumo_logic_insight_resolution = playbook.inputs.sumo_logic_insight_resolution
        note_text = f"{note_text}<br>   Resolution: {playbook.inputs.sumo_logic_insight_resolution}"
    # Uncomment if sub_resolution is implemented.
    #if playbook.inputs.sumo_logic_insight_sub_resolution and playbook.inputs.sumo_logic_insight_status == 'Closed':
    #    incident.properties.sumo_logic_insight_sub_resolution = playbook.inputs.sumo_logic_insight_sub_resolution
    #    note_text = f"{note_text}<br>   Sub Resolution: {playbook.inputs.sumo_logic_insight_sub_resolution"
else:
    reason = results.get("reason")
    note_text = f"<b>Sumo Logic: Update Insight Status: </b> failed to update status to <b>{playbook.inputs.sumo_logic_insight_status}</b>:<br>  {reason}"
  
incident.addNote(note_text)
```

---

