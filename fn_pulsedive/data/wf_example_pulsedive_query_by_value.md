<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-circuits codegen
-->

# Example: Pulsedive Query by Value

## Function - Pulsedive: Query by Value

### API Name
`pulsedive_query_value`

### Output Name
``

### Message Destination
`fn_pulsedive`

### Pre-Processing Script
```python
# artifact value = Indicator ip address or DNS, Threat name (string), or Feed name and organization
inputs.incident_id = incident.id
inputs.attachment_name = rule.properties.attachment_name
inputs.pulsedive_value = artifact.value
inputs.pulsedive_query_type = rule.properties.pulsedive_query_type
inputs.pulsedive_feed_org = rule.properties.pulsedive_feed_organization
inputs.pulsedive_pretty = rule.properties.pulsedive_pretty
```

### Post-Processing Script
```python
# get summary info for notes

# value of indicator, threat or feed
pd_value = results.get("resp_json")["inputs"]["pulsedive_value"]

# query type
if results.get("resp_json")["inputs"]["pulsedive_query_type"]["name"] == "Indicator":
  pd_type = "Indicator"
elif results.get("resp_json")["inputs"]["pulsedive_query_type"]["name"] == "Threat":
  pd_type = "Threat"
else:
  pd_type = "Feed"
  
# set text parameters
note_text = u"<p><b>Pulsedive Query by Value Summary</b></p> \
<p><b>{} value:</b> {}</p> \
For full dataset, see attachment '{}'".format(pd_type, pd_value, results.get("att_name"))

# Create note text
note = helper.createRichText(note_text)

# Create incident note
incident.addNote(note)


```

---

