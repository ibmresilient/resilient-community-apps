<!--
    DO NOT MANUALLY EDIT THIS FILE
    THIS FILE IS AUTOMATICALLY GENERATED WITH resilient-sdk codegen
    Generated with resilient-sdk v50.0.151
-->

# Playbook - SentinelOne: Send Note to SentinelOne Threat (PB)

### API Name
`sentinelone_send_note_to_sentinelone_threat_pb`

### Status
`enabled`

### Activation Type
`Manual`

### Activation Conditions
`incident.properties.sentinelone_threat_id has_a_value AND note.text not_contains Sent to SentinelOne at `

### Object Type
`note`

### Description
Send a note created in SOAR to the corresponding SentinelOne threat as a threat note.


---
## Function - SentinelOne: Send SOAR Note to SentinelOne

### API Name
`sentinelone_send_soar_note_to_sentinelone`

### Output Name
`send_note_results`

### Message Destination
`fn_sentinelone`

### Function-Input Script
```python
inputs.sentinelone_threat_id = incident.properties.sentinelone_threat_id
inputs.sentinelone_note_text = note.text.content
```

---

## Local script - SentinelOne: Add sent header to SOAR note

### Description
 Add sent header to SOAR note so it is only sent once.

### Script Type
`Local script`

### Object Type
`note`

### Script Content
```python
from datetime import datetime

results = playbook.functions.results.send_note_results

# Edit note in SOAR to indicate it was sent to SentinelOne
if results.get("success"):
  # Get the current time
  dt_now = datetime.now()
  
  # Add header to note so we know it's been sent to S1 once
  note.text = "<b>Sent to SentinelOne at {0}</b><br>{1}".format(dt_now, note.text.content)
```

---

